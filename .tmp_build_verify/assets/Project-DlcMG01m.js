import{h as $e,r as n,j as e,L as j}from"./react-core-BcR2_z_l.js";import{C as Ee}from"./CommentsSection-DQcUB_pi.js";import{B as p}from"./badge-CX6RuieY.js";import{B as u}from"./button-C7iHbTqw.js";import{C as d,a as c,b as Le,c as De}from"./card-VD61BBwz.js";import{A as le,a as ne,b as oe,c as ie}from"./accordion-DHuEXPng.js";import{T as Ae,L as Pe}from"./ThemedSvgLogo-CGFMwyp6.js";import{g as Be,b as Re,n as de,d as g}from"./index-ntR5v_s2.js";import{i as ce,a as ze,b as Ue}from"./project-utils-BfxKnQDe.js";import{f as _e}from"./date-D79tpn1j.js";import{b as U,s as me,t as ue,a as xe,c as Fe,d as Ve}from"./project-taxonomy-jSQkF-Xh.js";import{f as He}from"./file-size-BTsg2_fJ.js";import{u as qe}from"./use-page-meta-ewLab265.js";import Ge from"./NotFound-D66Ced63.js";import{D as _,H as F,C as Oe,S as We}from"./send-MS8NRuAC.js";import{c as v}from"./createLucideIcon-M1JG7EBz.js";import{B as Je}from"./book-open-CG_mViAI.js";import{U as V}from"./users-ok7q4J4c.js";import{C as Qe}from"./calendar-days-CGTk2DV6.js";import"./avatar-CVZSwVae.js";import"./index-Xj-Q384k.js";import"./alert-dialog-ugflDUIb.js";import"./input-BfSJiKKQ.js";import"./index-CHWtszJ3.js";import"./separator-CDy1CE57.js";import"./textarea-BwWmg86h.js";import"./use-toast-DeMRPCeJ.js";import"./index-CwaKb5FF.js";import"./mui-WkDK9qS1.js";import"./index-DZ2Ey5_7.js";import"./chevron-down-Mfh0mWaz.js";import"./url-safety-Py24cS-5.js";const Xe=v("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);const Ye=v("Clock3",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16.5 12",key:"1aq6pp"}]]);const Ze=v("Film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]]);const Ke=v("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);const es=v("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),Ds=()=>{const{slug:y}=$e(),i=Be(),[a,S]=n.useState(null),[pe,he]=n.useState(!1),[N,H]=n.useState([]),[q,G]=n.useState({}),[O,W]=n.useState({}),[J,Q]=n.useState({}),[I,T]=n.useState(null),[w,$]=n.useState(1),{settings:k}=Re(),X=n.useRef(new Set),ge=n.useMemo(()=>de(a?.cover)||de(k.site.defaultShareImage),[a?.cover,k.site.defaultShareImage]);qe({title:a?.title||"Projeto",description:a?.synopsis||"",image:ge,type:"article"}),n.useEffect(()=>{if(!y)return;let s=!0;return(async()=>{try{const l=await g(i,`/api/public/projects/${y}`);if(!l.ok){s&&S(null);return}const t=await l.json();s&&S(t.project||null)}catch{s&&S(null)}finally{s&&he(!0)}})(),()=>{s=!1}},[i,y]),n.useEffect(()=>{a?.id&&(X.current.has(a.id)||(X.current.add(a.id),g(i,`/api/public/projects/${a.id}/view`,{method:"POST"})))},[i,a?.id]),n.useEffect(()=>{let s=!0;return(async()=>{try{const[l,t]=await Promise.all([g(i,"/api/public/projects"),g(i,"/api/public/tag-translations",{cache:"no-store"})]);if(l.ok){const o=await l.json();s&&H(Array.isArray(o.projects)?o.projects:[])}if(t.ok){const o=await t.json();s&&(G(o.tags||{}),W(o.genres||{}),Q(o.staffRoles||{}))}}catch{s&&(H([]),G({}),W({}),Q({}))}})(),()=>{s=!1}},[i]),n.useEffect(()=>{let s=!0;return(async()=>{try{const l=await g(i,"/api/public/me",{auth:!0});if(!l.ok){s&&T(null);return}const t=await l.json();s&&T(t?.user??null)}catch{s&&T(null)}})(),()=>{s=!1}},[i]);const Y=n.useMemo(()=>{if(!a)return[];const s=(a.type||"").toLowerCase(),r=ce(s);return[{label:"Formato",value:a.type},{label:"Status",value:a.status},{label:"Ano",value:a.year},{label:"Estúdio",value:a.studio},{label:"Temporada",value:a.season},{label:r?"Capítulos":"Episódios",value:a.episodes},{label:"Classificação",value:a.rating},{label:"Agenda",value:a.schedule}].filter(l=>String(l.value||"").trim().length>0)},[a]),E=n.useMemo(()=>U(q),[q]),L=n.useMemo(()=>U(O),[O]),fe=n.useMemo(()=>U(J),[J]),be=n.useMemo(()=>{const s=Array.isArray(a?.tags)?a.tags:[];return me(s,r=>ue(r,E))},[a?.tags,E]),je=n.useMemo(()=>{const s=Array.isArray(a?.genres)?a.genres:[];return me(s,r=>xe(r,L))},[a?.genres,L]),ve=n.useMemo(()=>{const s=new Map;return k.downloads.sources.forEach(r=>{r?.label&&s.set(r.label.toLowerCase(),{color:r.color||"#7C3AED",icon:r.icon,tintIcon:r.tintIcon!==!1})}),s},[k.downloads.sources]),ye=(s,r,l,t=!0)=>{if(s&&(s.startsWith("http")||s.startsWith("data:")||s.startsWith("/uploads/")))return t?e.jsx(Ae,{url:s,label:l||"Fonte de download",className:"h-4 w-4",color:r}):e.jsx("img",{src:s,alt:l||"",className:"h-4 w-4"});const o=String(s||"").toLowerCase();if(o==="google-drive")return e.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:"h-4 w-4",style:{color:r},children:e.jsx("path",{fill:"currentColor",d:"M7.5 3h9l4.5 8-4.5 8h-9L3 11z"})});if(o==="mega")return e.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:"h-4 w-4",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10",fill:r}),e.jsx("path",{fill:"#fff",d:"M7.2 16.4V7.6h1.6l3.2 4.2 3.2-4.2h1.6v8.8h-1.6V10l-3.2 4.1L8.8 10v6.4z"})]});const m={telegram:We,mediafire:Oe,torrent:F,link:Pe,download:_}[o]||_;return e.jsx(m,{className:"h-4 w-4",style:{color:r}})},Ne=s=>{const r=Number(s.sizeBytes),l=Number.isFinite(r)&&r>0?He(r):"",t=String(s.hash||"").trim(),o=t.length>36?`${t.slice(0,36)}...`:t;return{sizeLabel:l,hashLabel:o,hashTitle:t}},Z=n.useMemo(()=>(a?.episodeDownloads||[]).filter(s=>(s.sources||[]).length>0),[a?.episodeDownloads]),K=n.useMemo(()=>(a?.episodeDownloads||[]).filter(s=>s.hasContent||typeof s.content=="string"&&s.content.trim().length>0),[a?.episodeDownloads]),f=n.useMemo(()=>[...Z].sort((s,r)=>{const l=(s.number||0)-(r.number||0);return l!==0?l:(s.volume||0)-(r.volume||0)}),[Z]),D=n.useMemo(()=>[...K].sort((s,r)=>{const l=(s.number||0)-(r.number||0);return l!==0?l:(s.volume||0)-(r.volume||0)}),[K]),ee=D,se=n.useMemo(()=>{if(!a?.relations?.length)return[];const s=new Set(N.map(r=>String(r.id)));return a.relations.filter(r=>{const l=r.projectId||(r.anilistId?String(r.anilistId):"");return l&&s.has(l)})},[a?.relations,N]),A=a?.type||"",P=ze(A),b=Ue(A),h=ce(A),we=n.useMemo(()=>{const s=Array.isArray(I?.permissions)?I.permissions:[];return s.includes("*")||s.includes("projetos")},[I]),ke=(s,r)=>{if(!a?.id)return;const l=Number(s.number),t=Number(s.volume),x={eventType:"download_click",resourceType:"chapter",resourceId:`${a.id}:${Number.isFinite(l)?l:0}:${Number.isFinite(t)?t:0}`,meta:{projectId:a.id,sourceLabel:String(r||"").trim()}};Number.isFinite(l)&&(x.meta.chapterNumber=l),Number.isFinite(t)&&(x.meta.volume=t),g(i,"/api/public/analytics/event",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(x)})},re=(s,r,l)=>{const{sizeLabel:t,hashLabel:o,hashTitle:x}=Ne(s);return e.jsx(d,{className:"group w-full overflow-hidden rounded-2xl border border-border/60 bg-gradient-card shadow-[0_24px_90px_-55px_rgba(0,0,0,0.75)] transition-all duration-300 hover:-translate-y-1 hover:border-primary/40 hover:shadow-[0_28px_100px_-50px_rgba(0,0,0,0.85)] md:h-[185px] md:w-[920px]",children:e.jsxs(c,{className:"relative grid h-full gap-4 p-4 md:grid-cols-[272px_minmax(0,1fr)] md:items-start md:gap-4 md:p-4",children:[l?e.jsxs(p,{variant:"outline",className:"absolute right-4 top-4 inline-flex items-center gap-1 rounded-full border-primary/25 bg-background/70 text-[10px] uppercase tracking-wide",children:[e.jsx(F,{className:"h-3 w-3"}),s.sourceType]}):null,e.jsx("div",{className:"w-full overflow-hidden rounded-xl border border-border/60 bg-background/50 shadow-inner md:h-[153px] md:w-[272px]",children:e.jsx("img",{src:s.coverImageUrl||a.banner||a.cover||"/placeholder.svg",alt:`Preview de ${s.title}`,className:"h-full w-full aspect-video object-cover object-center transition-transform duration-300 group-hover:scale-[1.03]"})}),e.jsxs("div",{className:"relative h-full min-h-[153px] md:pr-0",children:[e.jsxs("div",{className:"space-y-2.5 pb-12 md:pb-[52px]",children:[e.jsxs("div",{className:"flex min-w-0 items-center gap-2 pr-20",children:[e.jsx(p,{variant:"secondary",className:"rounded-full px-2.5 py-0.5 text-[10px] uppercase",children:P?`Cap ${s.number}${s.volume?` • Vol. ${s.volume}`:""}`:`EP ${s.number}`}),e.jsx("p",{className:"truncate text-base font-semibold text-foreground md:text-lg",children:s.title})]}),e.jsxs("div",{className:"flex flex-col items-start gap-1.5 text-xs text-muted-foreground",children:[s.duration?e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx(Ye,{className:"h-3.5 w-3.5 text-primary/70"}),e.jsx("span",{className:"font-medium text-foreground/90",children:"Duração:"}),s.duration]}):null,s.releaseDate?e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx(Qe,{className:"h-3.5 w-3.5 text-primary/70"}),e.jsx("span",{className:"font-medium text-foreground/90",children:"Data:"}),_e(s.releaseDate)]}):null,t?e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx(F,{className:"h-3.5 w-3.5 text-primary/70"}),e.jsx("span",{className:"font-medium text-foreground/90",children:"Tamanho:"}),t]}):null,x?e.jsxs("span",{className:"inline-flex min-w-0 max-w-full items-center gap-1",children:[e.jsx(Ke,{className:"h-3.5 w-3.5 shrink-0 text-primary/70"}),e.jsx("span",{className:"shrink-0 font-medium text-foreground/90",children:"Hash:"}),e.jsx("span",{className:"max-w-[260px] truncate",title:x,children:o})]}):null]})]}),e.jsx("div",{className:"flex flex-wrap items-center justify-end gap-2 md:absolute md:-bottom-2 md:left-0 md:right-0",children:s.sources.map((m,Ie)=>{const R=ve.get(m.label.toLowerCase()),z=R?.color||"#4b5563",Te=ye(R?.icon,z,m.label,R?.tintIcon??!0);return e.jsx(u,{asChild:!0,variant:"outline",size:"sm",className:"h-9 rounded-full bg-card/70 px-4 text-sm hover:bg-primary/10",style:{borderColor:`${z}99`,color:z},children:e.jsxs("a",{href:m.url,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2",onClick:()=>ke(s,m.label),children:[Te,m.label]})},`${r}-${m.label}-${Ie}`)})})]})]})},r)},ae=n.useMemo(()=>{const s=new Map;return(b?D:f).forEach(t=>{const o=typeof t.volume=="number"&&!Number.isNaN(t.volume)?String(t.volume):"none";s.has(o)||s.set(o,{label:o==="none"?"Sem volume":`Volume ${o}`,volume:o==="none"?void 0:Number(o),items:[]}),s.get(o)?.items.push(t)}),Array.from(s.entries()).sort((t,o)=>t[0]==="none"?1:o[0]==="none"?-1:Number(t[0])-Number(o[0])).map(([,t])=>t)},[b,f,D]),C=n.useMemo(()=>f,[h,f]);n.useEffect(()=>{$(1)},[a?.id]);const B=24,M=Math.max(1,Math.ceil(C.length/B)),te=(w-1)*B,Ce=C.slice(te,te+B),Me=n.useMemo(()=>{const s=new Map;return N.forEach(r=>{r.anilistId&&s.set(String(r.anilistId),r.id),s.set(String(r.id),r.id)}),s},[N]),Se=async()=>{if(!a)return;const s=`${window.location.origin}/projeto/${a.id}`;try{await navigator.clipboard.writeText(s)}catch{const r=document.createElement("textarea");r.value=s,document.body.appendChild(r),r.select(),document.execCommand("copy"),document.body.removeChild(r)}};return!y||!a&&pe?e.jsx(Ge,{}):a?e.jsx("div",{className:"min-h-screen bg-background text-foreground",children:e.jsxs("main",{children:[e.jsxs("section",{className:"relative overflow-hidden border-b border-border/60",children:[e.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${a.banner})`}}),e.jsx("div",{className:"absolute inset-0 bg-background/30 backdrop-blur-[2px]"}),e.jsx("div",{className:"absolute inset-0 bg-linear-to-t from-background/85 via-background/45 to-transparent"}),e.jsxs("div",{className:"relative mx-auto flex min-h-[420px] w-full max-w-6xl flex-col items-center gap-8 px-6 pb-16 pt-24 md:flex-row md:items-center md:px-10 lg:min-h-[520px] reveal","data-reveal":!0,children:[e.jsx("div",{className:"mx-auto w-52 shrink-0 overflow-hidden rounded-2xl bg-secondary shadow-2xl animate-slide-up opacity-0 md:mx-0 md:w-64",children:e.jsx("img",{src:a.cover,alt:a.title,className:"h-auto w-full object-contain"})}),e.jsxs("div",{className:"flex w-full flex-1 flex-col items-center gap-4 text-center md:items-start md:text-left",children:[e.jsxs("div",{className:"flex w-full flex-wrap items-center justify-center gap-3 text-center text-xs uppercase tracking-[0.2em] text-primary/80 animate-fade-in md:w-auto md:justify-start md:text-left",children:[e.jsx("span",{children:a.type}),e.jsx("span",{className:"text-muted-foreground",children:"•"}),e.jsx("span",{children:a.status})]}),e.jsx("h1",{className:"text-center text-3xl font-semibold text-foreground md:text-left md:text-4xl lg:text-5xl animate-slide-up",children:a.title}),e.jsx("p",{className:"max-w-2xl text-center text-sm text-muted-foreground md:text-left md:text-base animate-slide-up opacity-0",style:{animationDelay:"0.2s"},children:a.synopsis}),a.tags?.length?e.jsx("div",{className:"flex w-full flex-wrap justify-center gap-2 animate-slide-up opacity-0 md:justify-start",style:{animationDelay:"0.3s"},children:be.map(s=>e.jsx(j,{to:`/projetos?tag=${encodeURIComponent(s)}`,className:"inline-flex",children:e.jsx(p,{variant:"secondary",className:"text-[10px] uppercase",children:ue(s,E)})},s))}):null,e.jsxs("div",{className:"flex w-full flex-wrap justify-center gap-3 animate-slide-up opacity-0 md:justify-start",style:{animationDelay:"0.4s"},children:[e.jsx(u,{asChild:!0,className:"gap-2",children:e.jsxs("a",{href:"#downloads",children:[e.jsx(_,{className:"h-4 w-4"}),h?"Ver capítulos":"Ver episódios"]})}),a.trailerUrl?e.jsx(u,{asChild:!0,variant:"outline",className:"gap-2",children:e.jsxs("a",{href:a.trailerUrl,target:"_blank",rel:"noreferrer",children:[e.jsx(Xe,{className:"h-4 w-4"}),"Assistir trailer"]})}):null,we?e.jsx(u,{asChild:!0,variant:"secondary",className:"gap-2",children:e.jsx(j,{to:`/dashboard/projetos?edit=${encodeURIComponent(a.id)}`,children:"Editar projeto"})}):null]})]})]})]}),e.jsx("section",{className:"mx-auto w-full max-w-6xl px-6 pb-12 pt-12 md:px-10 reveal","data-reveal":!0,children:e.jsxs("div",{className:"grid gap-8 lg:grid-cols-[minmax(0,2fr)_minmax(0,1fr)]",children:[e.jsxs("div",{className:"space-y-8",children:[e.jsx(d,{className:"border-border/60 bg-card/80 shadow-lg transition-all duration-300 hover:-translate-y-1 hover:border-primary/40 hover:bg-card/90 hover:shadow-lg",children:e.jsxs(c,{className:"space-y-4 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 text-sm font-semibold uppercase tracking-widest text-muted-foreground",children:[h?e.jsx(Je,{className:"h-4 w-4 text-primary"}):e.jsx(Ze,{className:"h-4 w-4 text-primary"}),"Sobre o projeto"]}),a.genres?.length?e.jsx("div",{className:"flex flex-wrap gap-2",children:je.map(s=>e.jsx(j,{to:`/projetos?genero=${encodeURIComponent(s)}`,className:"inline-flex",children:e.jsx(p,{variant:"outline",className:"text-[10px] uppercase",children:xe(s,L)})},s))}):null,Y.length?e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:Y.map(s=>e.jsxs("div",{className:"rounded-xl border border-border/50 bg-background/60 px-4 py-3",children:[e.jsx("span",{className:"block text-[10px] font-semibold uppercase tracking-widest text-muted-foreground",children:s.label}),e.jsx("p",{className:"mt-1 text-sm font-semibold text-foreground",children:s.value})]},s.label))}):null]})}),se.length>0?e.jsx(d,{className:"border-border/60 bg-card/80 shadow-lg transition-all duration-300 hover:-translate-y-1 hover:border-primary/40 hover:bg-card/90 hover:shadow-lg",children:e.jsxs(c,{className:"space-y-5 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 text-sm font-semibold uppercase tracking-widest text-muted-foreground",children:[e.jsx(V,{className:"h-4 w-4 text-primary"}),"Relacionados"]}),e.jsx("div",{className:"grid gap-4 sm:grid-cols-2",children:se.map(s=>{const r=s.projectId||(s.anilistId?String(s.anilistId):""),t=Me.get(r)||r;return e.jsxs(j,{to:t?`/projeto/${t}`:"#",className:"group flex gap-4 rounded-xl border border-border/50 bg-background/60 p-4 transition-all duration-300 hover:-translate-y-1 hover:border-primary/40 hover:bg-background/80 hover:shadow-lg",children:[e.jsx("div",{className:"w-16 shrink-0 overflow-hidden rounded-lg bg-secondary aspect-2/3",children:e.jsx("img",{src:s.image,alt:s.title,className:"h-full w-full object-cover transition-transform duration-300 group-hover:scale-105"})}),e.jsxs("div",{className:"min-w-0 space-y-2",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-widest text-primary/80",children:Fe(s.relation)}),e.jsx("p",{className:"text-sm font-semibold text-foreground transition group-hover:text-primary",children:s.title}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.format," • ",s.status]})]})]},`${s.relation}-${s.title}`)})})]})}):null]}),e.jsxs("div",{className:"space-y-6",children:[a.staff?.length?e.jsx(d,{className:"border-border/60 bg-card/70 shadow-md transition-all duration-300 hover:-translate-y-1 hover:border-primary/40 hover:bg-card/90 hover:shadow-lg",children:e.jsxs(c,{className:"space-y-5 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 text-sm font-semibold uppercase tracking-widest text-muted-foreground",children:[e.jsx(V,{className:"h-4 w-4 text-primary"}),"Equipe da fansub"]}),e.jsx("div",{className:"space-y-3",children:a.staff.map(s=>e.jsxs("div",{className:"rounded-xl border border-border/50 bg-background/60 px-4 py-3",children:[e.jsx("p",{className:"block text-xs font-semibold uppercase tracking-widest text-primary/80",children:s.role}),e.jsx("p",{className:"mt-1 text-sm text-foreground",children:s.members.join(", ")})]},s.role))})]})}):null,a.animeStaff?.length?e.jsx(d,{className:"border-border/60 bg-card/70 shadow-md transition-all duration-300 hover:-translate-y-1 hover:border-primary/40 hover:bg-card/90 hover:shadow-lg",children:e.jsxs(c,{className:"space-y-5 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 text-sm font-semibold uppercase tracking-widest text-muted-foreground",children:[e.jsx(V,{className:"h-4 w-4 text-primary"}),"Staff do anime"]}),e.jsx("div",{className:"space-y-3",children:a.animeStaff.map(s=>e.jsxs("div",{className:"rounded-xl border border-border/50 bg-background/60 px-4 py-3",children:[e.jsx("p",{className:"block text-xs font-semibold uppercase tracking-widest text-primary/80",children:Ve(s.role,fe)}),e.jsx("p",{className:"mt-1 text-sm text-foreground",children:s.members.join(", ")})]},s.role))})]})}):null]})]})}),e.jsx("section",{id:"downloads",className:"mx-auto w-full max-w-6xl px-6 pb-20 pt-4 md:px-10 reveal","data-reveal":!0,children:e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-foreground",children:h?"Capítulos":"Downloads"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:b?"Leia os capítulos disponíveis diretamente no site.":P?"Selecione um capítulo disponível para download.":"Selecione uma fonte de download para cada item disponível."})]}),e.jsxs(p,{variant:"secondary",className:"text-xs uppercase",children:[b?ee.length:C.length," disponíveis"]})]}),b?ee.length===0?e.jsx("div",{className:"rounded-2xl border border-dashed border-border/60 bg-card/40 p-8 text-center text-sm text-muted-foreground",children:"Nenhum capítulo publicado ainda."}):e.jsx("div",{className:"grid gap-6",children:ae.map(s=>e.jsx(d,{className:"border-border/60 bg-card/80 shadow-lg transition-all duration-300 hover:-translate-y-1 hover:border-primary/40 hover:bg-card/90 hover:shadow-lg",children:e.jsx(c,{className:"space-y-4 p-6",children:e.jsx(le,{type:"multiple",defaultValue:[s.label],children:e.jsxs(ne,{value:s.label,className:"border-none",children:[e.jsx(oe,{className:"rounded-xl border border-border/60 bg-background/40 px-4 py-3 text-sm font-semibold text-foreground hover:no-underline",children:e.jsxs("div",{className:"flex w-full items-center justify-between gap-4",children:[e.jsx("span",{children:s.label}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[s.items.length," capítulos"]})]})}),e.jsx(ie,{className:"pt-4",children:e.jsx("div",{className:"grid gap-4",children:s.items.map(r=>{const l=r.hasContent||typeof r.content=="string"&&r.content.trim().length>0,t=r.volume?`?volume=${r.volume}`:"";return e.jsx(d,{className:"border-border/60 bg-background/60 transition-all duration-300 hover:-translate-y-1 hover:border-primary/40 hover:bg-background/80 hover:shadow-lg",children:e.jsxs(c,{className:"space-y-3 p-4",children:[e.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs(p,{variant:"secondary",className:"text-xs uppercase",children:["Cap ",r.number,r.volume?` • Vol. ${r.volume}`:""]}),e.jsx("p",{className:"text-base font-semibold text-foreground",children:r.title||"Capítulo"})]}),e.jsx("div",{className:"flex items-center gap-2",children:l?e.jsx(u,{asChild:!0,size:"sm",children:e.jsx(j,{to:`/projeto/${a.id}/leitura/${r.number}${t}`,children:"Ler capítulo"})}):e.jsx(p,{variant:"outline",className:"text-[10px] uppercase",children:"Em breve"})})]}),r.synopsis?e.jsx("p",{className:"text-sm text-muted-foreground",children:r.synopsis}):null]})},`${r.number}-${r.volume||0}`)})})})]})})})},s.label))}):C.length===0?e.jsx("div",{className:"rounded-2xl border border-dashed border-border/60 bg-card/40 p-8 text-center text-sm text-muted-foreground",children:"Este projeto ainda está em produção. Assim que os episódios forem lançados, os downloads aparecerão aqui."}):e.jsx("div",{className:"grid gap-6 justify-items-center",children:P?ae.map(s=>e.jsx(d,{className:"border-border/60 bg-card/80 shadow-lg transition-all duration-300 hover:-translate-y-1 hover:border-primary/40 hover:bg-card/90 hover:shadow-lg",children:e.jsx(c,{className:"space-y-4 p-6",children:e.jsx(le,{type:"multiple",defaultValue:[s.label],children:e.jsxs(ne,{value:s.label,className:"border-none",children:[e.jsx(oe,{className:"rounded-xl border border-border/60 bg-background/40 px-4 py-3 text-sm font-semibold text-foreground hover:no-underline",children:e.jsxs("div",{className:"flex w-full items-center justify-between gap-4",children:[e.jsx("span",{children:s.label}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[s.items.length," capítulos"]})]})}),e.jsx(ie,{className:"pt-4",children:e.jsx("div",{className:"grid gap-6 justify-items-center",children:s.items.map(r=>re(r,`${r.number}-${r.volume||0}`,!1))})})]})})})},s.label)):Ce.map(s=>re(s,String(s.number),!0))}),!h&&M>1?e.jsxs("div",{className:"mt-6 flex items-center justify-center gap-3",children:[e.jsx(u,{variant:"outline",size:"sm",disabled:w===1,onClick:()=>$(s=>Math.max(1,s-1)),children:"Anterior"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["Página ",w," de ",M]}),e.jsx(u,{variant:"outline",size:"sm",disabled:w===M,onClick:()=>$(s=>Math.min(M,s+1)),children:"Próxima"})]}):null]})}),e.jsx("section",{className:"mx-auto w-full max-w-6xl px-6 pb-24 pt-4 md:px-10 reveal","data-reveal":!0,children:e.jsxs("div",{className:"grid gap-6",children:[e.jsxs(d,{className:"border-border bg-card transition-all duration-300 hover:-translate-y-1 hover:border-primary/40 hover:bg-card/90 hover:shadow-lg",children:[e.jsx(Le,{children:e.jsx(De,{className:"text-lg",children:"Compartilhar"})}),e.jsxs(c,{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(es,{className:"h-4 w-4 text-primary/70","aria-hidden":"true"}),"Copie o link para compartilhar este projeto."]}),e.jsx(u,{size:"sm",variant:"secondary",onClick:Se,children:"Copiar link"})]})]}),e.jsx(Ee,{targetType:"project",targetId:a.id})]})})]})}):null};export{Ds as default};
