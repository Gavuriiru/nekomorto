import{r as c,b as pt,j as q,a as kt}from"./react-core-BcR2_z_l.js";import{I as Nt,J as le,K as Dt,L as J,M as Ne,N as Lt,O as De,Q as _t,S as $t,U as Bt,W as gt}from"./index-ntR5v_s2.js";var Wt=["input:not([inert]):not([inert] *)","select:not([inert]):not([inert] *)","textarea:not([inert]):not([inert] *)","a[href]:not([inert]):not([inert] *)","button:not([inert]):not([inert] *)","[tabindex]:not(slot):not([inert]):not([inert] *)","audio[controls]:not([inert]):not([inert] *)","video[controls]:not([inert]):not([inert] *)",'[contenteditable]:not([contenteditable="false"]):not([inert]):not([inert] *)',"details>summary:first-of-type:not([inert]):not([inert] *)","details:not([inert]):not([inert] *)"],Ie=Wt.join(","),mt=typeof Element>"u",ge=mt?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Ce=!mt&&Element.prototype.getRootNode?function(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}:function(e){return e?.ownerDocument},Ae=function(t,n){var r;n===void 0&&(n=!0);var o=t==null||(r=t.getAttribute)===null||r===void 0?void 0:r.call(t,"inert"),s=o===""||o==="true",i=s||n&&t&&(typeof t.closest=="function"?t.closest("[inert]"):Ae(t.parentNode));return i},jt=function(t){var n,r=t==null||(n=t.getAttribute)===null||n===void 0?void 0:n.call(t,"contenteditable");return r===""||r==="true"},ht=function(t,n,r){if(Ae(t))return[];var o=Array.prototype.slice.apply(t.querySelectorAll(Ie));return n&&ge.call(t,Ie)&&o.unshift(t),o=o.filter(r),o},Pe=function(t,n,r){for(var o=[],s=Array.from(t);s.length;){var i=s.shift();if(!Ae(i,!1))if(i.tagName==="SLOT"){var u=i.assignedElements(),l=u.length?u:i.children,a=Pe(l,!0,r);r.flatten?o.push.apply(o,a):o.push({scopeParent:i,candidates:a})}else{var b=ge.call(i,Ie);b&&r.filter(i)&&(n||!t.includes(i))&&o.push(i);var p=i.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(i),x=!Ae(p,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(i));if(p&&x){var d=Pe(p===!0?i.children:p.children,!0,r);r.flatten?o.push.apply(o,d):o.push({scopeParent:i,candidates:d})}else s.unshift.apply(s,i.children)}}return o},Rt=function(t){return!isNaN(parseInt(t.getAttribute("tabindex"),10))},Et=function(t){if(!t)throw new Error("No node provided");return t.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||jt(t))&&!Rt(t)?0:t.tabIndex},Kt=function(t,n){var r=Et(t);return r<0&&n&&!Rt(t)?0:r},Vt=function(t,n){return t.tabIndex===n.tabIndex?t.documentOrder-n.documentOrder:t.tabIndex-n.tabIndex},yt=function(t){return t.tagName==="INPUT"},qt=function(t){return yt(t)&&t.type==="hidden"},Ht=function(t){var n=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(r){return r.tagName==="SUMMARY"});return n},Ut=function(t,n){for(var r=0;r<t.length;r++)if(t[r].checked&&t[r].form===n)return t[r]},Yt=function(t){if(!t.name)return!0;var n=t.form||Ce(t),r=function(u){return n.querySelectorAll('input[type="radio"][name="'+u+'"]')},o;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")o=r(window.CSS.escape(t.name));else try{o=r(t.name)}catch(i){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",i.message),!1}var s=Ut(o,t.form);return!s||s===t},Gt=function(t){return yt(t)&&t.type==="radio"},Xt=function(t){return Gt(t)&&!Yt(t)},Jt=function(t){var n,r=t&&Ce(t),o=(n=r)===null||n===void 0?void 0:n.host,s=!1;if(r&&r!==t){var i,u,l;for(s=!!((i=o)!==null&&i!==void 0&&(u=i.ownerDocument)!==null&&u!==void 0&&u.contains(o)||t!=null&&(l=t.ownerDocument)!==null&&l!==void 0&&l.contains(t));!s&&o;){var a,b,p;r=Ce(o),o=(a=r)===null||a===void 0?void 0:a.host,s=!!((b=o)!==null&&b!==void 0&&(p=b.ownerDocument)!==null&&p!==void 0&&p.contains(o))}}return s},Je=function(t){var n=t.getBoundingClientRect(),r=n.width,o=n.height;return r===0&&o===0},Zt=function(t,n){var r=n.displayCheck,o=n.getShadowRoot;if(r==="full-native"&&"checkVisibility"in t){var s=t.checkVisibility({checkOpacity:!1,opacityProperty:!1,contentVisibilityAuto:!0,visibilityProperty:!0,checkVisibilityCSS:!0});return!s}if(getComputedStyle(t).visibility==="hidden")return!0;var i=ge.call(t,"details>summary:first-of-type"),u=i?t.parentElement:t;if(ge.call(u,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="full-native"||r==="legacy-full"){if(typeof o=="function"){for(var l=t;t;){var a=t.parentElement,b=Ce(t);if(a&&!a.shadowRoot&&o(a)===!0)return Je(t);t.assignedSlot?t=t.assignedSlot:!a&&b!==t.ownerDocument?t=b.host:t=a}t=l}if(Jt(t))return!t.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return Je(t);return!1},zt=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var n=t.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var o=n.children.item(r);if(o.tagName==="LEGEND")return ge.call(n,"fieldset[disabled] *")?!0:!o.contains(t)}return!0}n=n.parentElement}return!1},je=function(t,n){return!(n.disabled||qt(n)||Zt(n,t)||Ht(n)||zt(n))},Ke=function(t,n){return!(Xt(n)||Et(n)<0||!je(t,n))},Qt=function(t){var n=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},xt=function(t){var n=[],r=[];return t.forEach(function(o,s){var i=!!o.scopeParent,u=i?o.scopeParent:o,l=Kt(u,i),a=i?xt(o.candidates):u;l===0?i?n.push.apply(n,a):n.push(u):r.push({documentOrder:s,tabIndex:l,item:o,isScope:i,content:a})}),r.sort(Vt).reduce(function(o,s){return s.isScope?o.push.apply(o,s.content):o.push(s.content),o},[]).concat(n)},Me=function(t,n){n=n||{};var r;return n.getShadowRoot?r=Pe([t],n.includeContainer,{filter:Ke.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:Qt}):r=ht(t,n.includeContainer,Ke.bind(null,n)),xt(r)},en=function(t,n){n=n||{};var r;return n.getShadowRoot?r=Pe([t],n.includeContainer,{filter:je.bind(null,n),flatten:!0,getShadowRoot:n.getShadowRoot}):r=ht(t,n.includeContainer,je.bind(null,n)),r},Tt=function(t,n){if(n=n||{},!t)throw new Error("No node provided");return ge.call(t,Ie)===!1?!1:Ke(n,t)};function wt(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function St(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function tn(){return/apple/i.test(navigator.vendor)}function Ve(){const e=/android/i;return e.test(wt())||e.test(St())}function nn(){return St().includes("jsdom/")}const Ze="data-floating-ui-focusable",rn="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function be(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function W(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&Nt(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function ie(e){return"composedPath"in e?e.composedPath()[0]:e.target}function Le(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function on(e){return e.matches("html,body")}function Y(e){return e?.ownerDocument||document}function sn(e){return le(e)&&e.matches(rn)}function ze(e){return e?e.getAttribute("role")==="combobox"&&sn(e):!1}function qe(e){return e?e.hasAttribute(Ze)?e:e.querySelector("["+Ze+"]")||e:null}function ve(e,t,n){return n===void 0&&(n=!0),e.filter(o=>{var s;return o.parentId===t&&(!n||((s=o.context)==null?void 0:s.open))}).flatMap(o=>[o,...ve(e,o.id,n)])}function Qe(e,t){var n;let r=[],o=(n=e.find(s=>s.id===t))==null?void 0:n.parentId;for(;o;){const s=e.find(i=>i.id===o);o=s?.parentId,s&&(r=r.concat(s))}return r}function _e(e){e.preventDefault(),e.stopPropagation()}function an(e){return"nativeEvent"in e}function un(e){return e.mozInputSource===0&&e.isTrusted?!0:Ve()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function cn(e){return nn()?!1:!Ve()&&e.width===0&&e.height===0||Ve()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}var ln=typeof document<"u",fn=function(){},j=ln?c.useLayoutEffect:fn;const dn={...pt};function $e(e){const t=c.useRef(e);return j(()=>{t.current=e}),t}const bn=dn.useInsertionEffect,vn=bn||(e=>e());function Z(e){const t=c.useRef(()=>{});return vn(()=>{t.current=e}),c.useCallback(function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t.current==null?void 0:t.current(...r)},[])}const Ee=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function It(e,t){const n=Me(e,Ee()),r=n.length;if(r===0)return;const o=be(Y(e)),s=n.indexOf(o),i=s===-1?t===1?0:r-1:s+t;return n[i]}function Ct(e){return It(Y(e).body,1)||e}function At(e){return It(Y(e).body,-1)||e}function he(e,t){const n=t||e.currentTarget,r=e.relatedTarget;return!r||!W(n,r)}function pn(e){Me(e,Ee()).forEach(n=>{n.dataset.tabindex=n.getAttribute("tabindex")||"",n.setAttribute("tabindex","-1")})}function et(e){e.querySelectorAll("[data-tabindex]").forEach(n=>{const r=n.dataset.tabindex;delete n.dataset.tabindex,r?n.setAttribute("tabindex",r):n.removeAttribute("tabindex")})}const gn="data-floating-ui-focusable",tt="active",nt="selected",mn={...pt};let rt=!1,hn=0;const ot=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+hn++;function Rn(){const[e,t]=c.useState(()=>rt?ot():void 0);return j(()=>{e==null&&t(ot())},[]),c.useEffect(()=>{rt=!0},[]),e}const En=mn.useId,He=En||Rn;function yn(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(o=>o(n))},on(t,n){e.has(t)||e.set(t,new Set),e.get(t).add(n)},off(t,n){var r;(r=e.get(t))==null||r.delete(n)}}}const xn=c.createContext(null),Tn=c.createContext(null),Pt=()=>{var e;return((e=c.useContext(xn))==null?void 0:e.id)||null},Ue=()=>c.useContext(Tn);function Re(e){return"data-floating-ui-"+e}function wn(e){e.current!==-1&&(clearTimeout(e.current),e.current=-1)}let st=0;function de(e,t){t===void 0&&(t={});const{preventScroll:n=!1,cancelPrevious:r=!0,sync:o=!1}=t;r&&cancelAnimationFrame(st);const s=()=>e?.focus({preventScroll:n});o?s():st=requestAnimationFrame(s)}function Sn(e){return e?.ownerDocument||document}const pe={inert:new WeakMap,"aria-hidden":new WeakMap,none:new WeakMap};function it(e){return e==="inert"?pe.inert:e==="aria-hidden"?pe["aria-hidden"]:pe.none}let Te=new WeakSet,we={},Be=0;const In=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,Ft=e=>e&&(e.host||Ft(e.parentNode)),Cn=(e,t)=>t.map(n=>{if(e.contains(n))return n;const r=Ft(n);return e.contains(r)?r:null}).filter(n=>n!=null);function An(e,t,n,r){const o="data-floating-ui-inert",s=r?"inert":n?"aria-hidden":null,i=Cn(t,e),u=new Set,l=new Set(i),a=[];we[o]||(we[o]=new WeakMap);const b=we[o];i.forEach(p),x(t),u.clear();function p(d){!d||u.has(d)||(u.add(d),d.parentNode&&p(d.parentNode))}function x(d){!d||l.has(d)||[].forEach.call(d.children,E=>{if(gt(E)!=="script")if(u.has(E))x(E);else{const R=s?E.getAttribute(s):null,S=R!==null&&R!=="false",w=it(s),f=(w.get(E)||0)+1,g=(b.get(E)||0)+1;w.set(E,f),b.set(E,g),a.push(E),f===1&&S&&Te.add(E),g===1&&E.setAttribute(o,""),!S&&s&&E.setAttribute(s,s==="inert"?"":"true")}})}return Be++,()=>{a.forEach(d=>{const E=it(s),S=(E.get(d)||0)-1,w=(b.get(d)||0)-1;E.set(d,S),b.set(d,w),S||(!Te.has(d)&&s&&d.removeAttribute(s),Te.delete(d)),w||d.removeAttribute(o)}),Be--,Be||(pe.inert=new WeakMap,pe["aria-hidden"]=new WeakMap,pe.none=new WeakMap,Te=new WeakSet,we={})}}function at(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);const r=Sn(e[0]).body;return An(e.concat(Array.from(r.querySelectorAll('[aria-live],[role="status"],output'))),r,t,n)}const Ye={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0},Fe=c.forwardRef(function(t,n){const[r,o]=c.useState();j(()=>{tn()&&o("button")},[]);const s={ref:n,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[Re("focus-guard")]:"",style:Ye};return q.jsx("span",{...t,...s})}),Pn={clipPath:"inset(50%)",position:"fixed",top:0,left:0},Mt=c.createContext(null),ut=Re("portal");function Fn(e){e===void 0&&(e={});const{id:t,root:n}=e,r=He(),o=Ot(),[s,i]=c.useState(null),u=c.useRef(null);return j(()=>()=>{s?.remove(),queueMicrotask(()=>{u.current=null})},[s]),j(()=>{if(!r||u.current)return;const l=t?document.getElementById(t):null;if(!l)return;const a=document.createElement("div");a.id=r,a.setAttribute(ut,""),l.appendChild(a),u.current=a,i(a)},[t,r]),j(()=>{if(n===null||!r||u.current)return;let l=n||o?.portalNode;l&&!Bt(l)&&(l=l.current),l=l||document.body;let a=null;t&&(a=document.createElement("div"),a.id=t,l.appendChild(a));const b=document.createElement("div");b.id=r,b.setAttribute(ut,""),l=a||l,l.appendChild(b),u.current=b,i(b)},[t,n,r,o]),s}function Kn(e){const{children:t,id:n,root:r,preserveTabOrder:o=!0}=e,s=Fn({id:n,root:r}),[i,u]=c.useState(null),l=c.useRef(null),a=c.useRef(null),b=c.useRef(null),p=c.useRef(null),x=i?.modal,d=i?.open,E=!!i&&!i.modal&&i.open&&o&&!!(r||s);return c.useEffect(()=>{if(!s||!o||x)return;function R(S){s&&he(S)&&(S.type==="focusin"?et:pn)(s)}return s.addEventListener("focusin",R,!0),s.addEventListener("focusout",R,!0),()=>{s.removeEventListener("focusin",R,!0),s.removeEventListener("focusout",R,!0)}},[s,o,x]),c.useEffect(()=>{s&&(d||et(s))},[d,s]),q.jsxs(Mt.Provider,{value:c.useMemo(()=>({preserveTabOrder:o,beforeOutsideRef:l,afterOutsideRef:a,beforeInsideRef:b,afterInsideRef:p,portalNode:s,setFocusManagerState:u}),[o,s]),children:[E&&s&&q.jsx(Fe,{"data-type":"outside",ref:l,onFocus:R=>{if(he(R,s)){var S;(S=b.current)==null||S.focus()}else{const w=i?i.domReference:null,f=At(w);f?.focus()}}}),E&&s&&q.jsx("span",{"aria-owns":s.id,style:Pn}),s&&kt.createPortal(t,s),E&&s&&q.jsx(Fe,{"data-type":"outside",ref:a,onFocus:R=>{if(he(R,s)){var S;(S=p.current)==null||S.focus()}else{const w=i?i.domReference:null,f=Ct(w);f?.focus(),i?.closeOnFocusOut&&i?.onOpenChange(!1,R.nativeEvent,"focus-out")}}})]})}const Ot=()=>c.useContext(Mt);function ct(e){return c.useMemo(()=>t=>{e.forEach(n=>{n&&(n.current=t)})},e)}const Mn=20;let ae=[];function Ge(){ae=ae.filter(e=>{var t;return(t=e.deref())==null?void 0:t.isConnected})}function On(e){Ge(),e&&gt(e)!=="body"&&(ae.push(new WeakRef(e)),ae.length>Mn&&(ae=ae.slice(-20)))}function lt(){Ge();const e=ae[ae.length-1];return e?.deref()}function kn(e){const t=Ee();return Tt(e,t)?e:Me(e,t)[0]||e}function ft(e,t){var n;if(!t.current.includes("floating")&&!((n=e.getAttribute("role"))!=null&&n.includes("dialog")))return;const r=Ee(),s=en(e,r).filter(u=>{const l=u.getAttribute("data-tabindex")||"";return Tt(u,r)||u.hasAttribute("data-tabindex")&&!l.startsWith("-")}),i=e.getAttribute("tabindex");t.current.includes("floating")||s.length===0?i!=="0"&&e.setAttribute("tabindex","0"):(i!=="-1"||e.hasAttribute("data-tabindex")&&e.getAttribute("data-tabindex")!=="-1")&&(e.setAttribute("tabindex","-1"),e.setAttribute("data-tabindex","-1"))}const Nn=c.forwardRef(function(t,n){return q.jsx("button",{...t,type:"button",ref:n,tabIndex:-1,style:Ye})});function Vn(e){const{context:t,children:n,disabled:r=!1,order:o=["content"],guards:s=!0,initialFocus:i=0,returnFocus:u=!0,restoreFocus:l=!1,modal:a=!0,visuallyHiddenDismiss:b=!1,closeOnFocusOut:p=!0,outsideElementsInert:x=!1,getInsideElements:d=()=>[]}=e,{open:E,onOpenChange:R,events:S,dataRef:w,elements:{domReference:f,floating:g}}=t,k=Z(()=>{var y;return(y=w.current.floatingContext)==null?void 0:y.nodeId}),G=Z(d),z=typeof i=="number"&&i<0,$=ze(f)&&z,H=In(),ue=H?s:!0,te=!ue||H&&x,_=$e(o),me=$e(i),ne=$e(u),m=Ue(),v=Ot(),L=c.useRef(null),N=c.useRef(null),h=c.useRef(!1),M=c.useRef(!1),D=c.useRef(-1),U=c.useRef(-1),fe=v!=null,I=qe(g),X=Z(function(y){return y===void 0&&(y=I),y?Me(y,Ee()):[]}),F=Z(y=>{const C=X(y);return _.current.map(T=>f&&T==="reference"?f:I&&T==="floating"?I:C).filter(Boolean).flat()});c.useEffect(()=>{if(r||!a)return;function y(T){if(T.key==="Tab"){W(I,be(Y(I)))&&X().length===0&&!$&&_e(T);const P=F(),O=ie(T);_.current[0]==="reference"&&O===f&&(_e(T),T.shiftKey?de(P[P.length-1]):de(P[1])),_.current[1]==="floating"&&O===I&&T.shiftKey&&(_e(T),de(P[0]))}}const C=Y(I);return C.addEventListener("keydown",y),()=>{C.removeEventListener("keydown",y)}},[r,f,I,a,_,$,X,F]),c.useEffect(()=>{if(r||!g)return;function y(C){const T=ie(C),O=X().indexOf(T);O!==-1&&(D.current=O)}return g.addEventListener("focusin",y),()=>{g.removeEventListener("focusin",y)}},[r,g,X]),c.useEffect(()=>{if(r||!p)return;function y(){M.current=!0,setTimeout(()=>{M.current=!1})}function C(O){const A=O.relatedTarget,Q=O.currentTarget,V=ie(O);queueMicrotask(()=>{const B=k(),ce=!(W(f,A)||W(g,A)||W(A,g)||W(v?.portalNode,A)||A!=null&&A.hasAttribute(Re("focus-guard"))||m&&(ve(m.nodesRef.current,B).find(oe=>{var ee,se;return W((ee=oe.context)==null?void 0:ee.elements.floating,A)||W((se=oe.context)==null?void 0:se.elements.domReference,A)})||Qe(m.nodesRef.current,B).find(oe=>{var ee,se,Xe;return[(ee=oe.context)==null?void 0:ee.elements.floating,qe((se=oe.context)==null?void 0:se.elements.floating)].includes(A)||((Xe=oe.context)==null?void 0:Xe.elements.domReference)===A})));if(Q===f&&I&&ft(I,_),l&&Q!==f&&!(V!=null&&V.isConnected)&&be(Y(I))===Y(I).body){le(I)&&I.focus();const oe=D.current,ee=X(),se=ee[oe]||ee[ee.length-1]||I;le(se)&&se.focus()}if(w.current.insideReactTree){w.current.insideReactTree=!1;return}($||!a)&&A&&ce&&!M.current&&A!==lt()&&(h.current=!0,R(!1,O,"focus-out"))})}const T=!!(!m&&v);function P(){wn(U),w.current.insideReactTree=!0,U.current=window.setTimeout(()=>{w.current.insideReactTree=!1})}if(g&&le(f))return f.addEventListener("focusout",C),f.addEventListener("pointerdown",y),g.addEventListener("focusout",C),T&&g.addEventListener("focusout",P,!0),()=>{f.removeEventListener("focusout",C),f.removeEventListener("pointerdown",y),g.removeEventListener("focusout",C),T&&g.removeEventListener("focusout",P,!0)}},[r,f,g,I,a,m,v,R,p,l,X,$,k,_,w]);const K=c.useRef(null),re=c.useRef(null),Oe=ct([K,v?.beforeInsideRef]),ke=ct([re,v?.afterInsideRef]);c.useEffect(()=>{var y,C;if(r||!g)return;const T=Array.from((v==null||(y=v.portalNode)==null?void 0:y.querySelectorAll("["+Re("portal")+"]"))||[]),O=(C=(m?Qe(m.nodesRef.current,k()):[]).find(V=>{var B;return ze(((B=V.context)==null?void 0:B.elements.domReference)||null)}))==null||(C=C.context)==null?void 0:C.elements.domReference,A=[g,O,...T,...G(),L.current,N.current,K.current,re.current,v?.beforeOutsideRef.current,v?.afterOutsideRef.current,_.current.includes("reference")||$?f:null].filter(V=>V!=null),Q=a||$?at(A,!te,te):at(A);return()=>{Q()}},[r,f,g,a,_,v,$,ue,te,m,k,G]),j(()=>{if(r||!le(I))return;const y=Y(I),C=be(y);queueMicrotask(()=>{const T=F(I),P=me.current,O=(typeof P=="number"?T[P]:P.current)||I,A=W(I,C);!z&&!A&&E&&de(O,{preventScroll:O===I})})},[r,E,I,z,F,me]),j(()=>{if(r||!I)return;const y=Y(I),C=be(y);On(C);function T(A){let{reason:Q,event:V,nested:B}=A;if(["hover","safe-polygon"].includes(Q)&&V.type==="mouseleave"&&(h.current=!0),Q==="outside-press")if(B)h.current=!1;else if(un(V)||cn(V))h.current=!1;else{let ce=!1;document.createElement("div").focus({get preventScroll(){return ce=!0,!1}}),ce?h.current=!1:h.current=!0}}S.on("openchange",T);const P=y.createElement("span");P.setAttribute("tabindex","-1"),P.setAttribute("aria-hidden","true"),Object.assign(P.style,Ye),fe&&f&&f.insertAdjacentElement("afterend",P);function O(){if(typeof ne.current=="boolean"){const A=f||lt();return A&&A.isConnected?A:P}return ne.current.current||P}return()=>{S.off("openchange",T);const A=be(y),Q=W(g,A)||m&&ve(m.nodesRef.current,k(),!1).some(B=>{var ce;return W((ce=B.context)==null?void 0:ce.elements.floating,A)}),V=O();queueMicrotask(()=>{const B=kn(V);ne.current&&!h.current&&le(B)&&(!(B!==A&&A!==y.body)||Q)&&B.focus({preventScroll:!0}),P.remove()})}},[r,g,I,ne,w,S,m,fe,f,k]),c.useEffect(()=>(queueMicrotask(()=>{h.current=!1}),()=>{queueMicrotask(Ge)}),[r]),j(()=>{if(!r&&v)return v.setFocusManagerState({modal:a,closeOnFocusOut:p,open:E,onOpenChange:R,domReference:f}),()=>{v.setFocusManagerState(null)}},[r,v,a,E,R,p,f]),j(()=>{r||I&&ft(I,_)},[r,I,_]);function ye(y){return r||!b||!a?null:q.jsx(Nn,{ref:y==="start"?L:N,onClick:C=>R(!1,C.nativeEvent),children:typeof b=="string"?b:"Dismiss"})}const xe=!r&&ue&&(a?!$:!0)&&(fe||a);return q.jsxs(q.Fragment,{children:[xe&&q.jsx(Fe,{"data-type":"inside",ref:Oe,onFocus:y=>{if(a){const T=F();de(o[0]==="reference"?T[0]:T[T.length-1])}else if(v!=null&&v.preserveTabOrder&&v.portalNode)if(h.current=!1,he(y,v.portalNode)){const T=Ct(f);T?.focus()}else{var C;(C=v.beforeOutsideRef.current)==null||C.focus()}}}),!$&&ye("start"),n,ye("end"),xe&&q.jsx(Fe,{"data-type":"inside",ref:ke,onFocus:y=>{if(a)de(F()[0]);else if(v!=null&&v.preserveTabOrder&&v.portalNode)if(p&&(h.current=!0),he(y,v.portalNode)){const T=At(f);T?.focus()}else{var C;(C=v.afterOutsideRef.current)==null||C.focus()}}})]})}let Se=0;const dt="--floating-ui-scrollbar-width";function Dn(){const e=wt(),t=/iP(hone|ad|od)|iOS/.test(e)||e==="MacIntel"&&navigator.maxTouchPoints>1,n=document.body.style,o=Math.round(document.documentElement.getBoundingClientRect().left)+document.documentElement.scrollLeft?"paddingLeft":"paddingRight",s=window.innerWidth-document.documentElement.clientWidth,i=n.left?parseFloat(n.left):window.scrollX,u=n.top?parseFloat(n.top):window.scrollY;if(n.overflow="hidden",n.setProperty(dt,s+"px"),s&&(n[o]=s+"px"),t){var l,a;const b=((l=window.visualViewport)==null?void 0:l.offsetLeft)||0,p=((a=window.visualViewport)==null?void 0:a.offsetTop)||0;Object.assign(n,{position:"fixed",top:-(u-Math.floor(p))+"px",left:-(i-Math.floor(b))+"px",right:"0"})}return()=>{Object.assign(n,{overflow:"",[o]:""}),n.removeProperty(dt),t&&(Object.assign(n,{position:"",top:"",left:"",right:""}),window.scrollTo(i,u))}}let bt=()=>{};const qn=c.forwardRef(function(t,n){const{lockScroll:r=!1,...o}=t;return j(()=>{if(r)return Se++,Se===1&&(bt=Dn()),()=>{Se--,Se===0&&bt()}},[r]),q.jsx("div",{ref:n,...o,style:{position:"fixed",overflow:"auto",top:0,right:0,bottom:0,left:0,...o.style}})}),Ln={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},_n={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},vt=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e?.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e?.outsidePress)!=null?n:!0}};function Hn(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:o,dataRef:s}=e,{enabled:i=!0,escapeKey:u=!0,outsidePress:l=!0,outsidePressEvent:a="pointerdown",referencePress:b=!1,referencePressEvent:p="pointerdown",ancestorScroll:x=!1,bubbles:d,capture:E}=t,R=Ue(),S=Z(typeof l=="function"?l:()=>!1),w=typeof l=="function"?S:l,f=c.useRef(!1),{escapeKey:g,outsidePress:k}=vt(d),{escapeKey:G,outsidePress:z}=vt(E),$=c.useRef(!1),H=Z(m=>{var v;if(!n||!i||!u||m.key!=="Escape"||$.current)return;const L=(v=s.current.floatingContext)==null?void 0:v.nodeId,N=R?ve(R.nodesRef.current,L):[];if(!g&&(m.stopPropagation(),N.length>0)){let h=!0;if(N.forEach(M=>{var D;if((D=M.context)!=null&&D.open&&!M.context.dataRef.current.__escapeKeyBubbles){h=!1;return}}),!h)return}r(!1,an(m)?m.nativeEvent:m,"escape-key")}),ue=Z(m=>{var v;const L=()=>{var N;H(m),(N=ie(m))==null||N.removeEventListener("keydown",L)};(v=ie(m))==null||v.addEventListener("keydown",L)}),te=Z(m=>{var v;const L=s.current.insideReactTree;s.current.insideReactTree=!1;const N=f.current;if(f.current=!1,a==="click"&&N||L||typeof w=="function"&&!w(m))return;const h=ie(m),M="["+Re("inert")+"]",D=Y(o.floating).querySelectorAll(M);let U=J(h)?h:null;for(;U&&!De(U);){const F=_t(U);if(De(F)||!J(F))break;U=F}if(D.length&&J(h)&&!on(h)&&!W(h,o.floating)&&Array.from(D).every(F=>!W(U,F)))return;if(le(h)&&ne){const F=De(h),K=$t(h),re=/auto|scroll/,Oe=F||re.test(K.overflowX),ke=F||re.test(K.overflowY),ye=Oe&&h.clientWidth>0&&h.scrollWidth>h.clientWidth,xe=ke&&h.clientHeight>0&&h.scrollHeight>h.clientHeight,y=K.direction==="rtl",C=xe&&(y?m.offsetX<=h.offsetWidth-h.clientWidth:m.offsetX>h.clientWidth),T=ye&&m.offsetY>h.clientHeight;if(C||T)return}const fe=(v=s.current.floatingContext)==null?void 0:v.nodeId,I=R&&ve(R.nodesRef.current,fe).some(F=>{var K;return Le(m,(K=F.context)==null?void 0:K.elements.floating)});if(Le(m,o.floating)||Le(m,o.domReference)||I)return;const X=R?ve(R.nodesRef.current,fe):[];if(X.length>0){let F=!0;if(X.forEach(K=>{var re;if((re=K.context)!=null&&re.open&&!K.context.dataRef.current.__outsidePressBubbles){F=!1;return}}),!F)return}r(!1,m,"outside-press")}),_=Z(m=>{var v;const L=()=>{var N;te(m),(N=ie(m))==null||N.removeEventListener(a,L)};(v=ie(m))==null||v.addEventListener(a,L)});c.useEffect(()=>{if(!n||!i)return;s.current.__escapeKeyBubbles=g,s.current.__outsidePressBubbles=k;let m=-1;function v(D){r(!1,D,"ancestor-scroll")}function L(){window.clearTimeout(m),$.current=!0}function N(){m=window.setTimeout(()=>{$.current=!1},Lt()?5:0)}const h=Y(o.floating);u&&(h.addEventListener("keydown",G?ue:H,G),h.addEventListener("compositionstart",L),h.addEventListener("compositionend",N)),w&&h.addEventListener(a,z?_:te,z);let M=[];return x&&(J(o.domReference)&&(M=Ne(o.domReference)),J(o.floating)&&(M=M.concat(Ne(o.floating))),!J(o.reference)&&o.reference&&o.reference.contextElement&&(M=M.concat(Ne(o.reference.contextElement)))),M=M.filter(D=>{var U;return D!==((U=h.defaultView)==null?void 0:U.visualViewport)}),M.forEach(D=>{D.addEventListener("scroll",v,{passive:!0})}),()=>{u&&(h.removeEventListener("keydown",G?ue:H,G),h.removeEventListener("compositionstart",L),h.removeEventListener("compositionend",N)),w&&h.removeEventListener(a,z?_:te,z),M.forEach(D=>{D.removeEventListener("scroll",v)}),window.clearTimeout(m)}},[s,o,u,w,a,n,r,x,i,g,k,H,G,ue,te,z,_]),c.useEffect(()=>{s.current.insideReactTree=!1},[s,w,a]);const me=c.useMemo(()=>({onKeyDown:H,...b&&{[Ln[p]]:m=>{r(!1,m.nativeEvent,"reference-press")},...p!=="click"&&{onClick(m){r(!1,m.nativeEvent,"reference-press")}}}}),[H,r,b,p]),ne=c.useMemo(()=>({onKeyDown:H,onMouseDown(){f.current=!0},onMouseUp(){f.current=!0},[_n[a]]:()=>{s.current.insideReactTree=!0}}),[H,a,s]);return c.useMemo(()=>i?{reference:me,floating:ne}:{},[i,me,ne])}function $n(e){const{open:t=!1,onOpenChange:n,elements:r}=e,o=He(),s=c.useRef({}),[i]=c.useState(()=>yn()),u=Pt()!=null,[l,a]=c.useState(r.reference),b=Z((d,E,R)=>{s.current.openEvent=d?E:void 0,i.emit("openchange",{open:d,event:E,reason:R,nested:u}),n?.(d,E,R)}),p=c.useMemo(()=>({setPositionReference:a}),[]),x=c.useMemo(()=>({reference:l||r.reference||null,floating:r.floating||null,domReference:r.reference}),[l,r.reference,r.floating]);return c.useMemo(()=>({dataRef:s,open:t,onOpenChange:b,elements:x,events:i,floatingId:o,refs:p}),[t,b,x,i,o,p])}function Un(e){e===void 0&&(e={});const{nodeId:t}=e,n=$n({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,o=r.elements,[s,i]=c.useState(null),[u,l]=c.useState(null),b=o?.domReference||s,p=c.useRef(null),x=Ue();j(()=>{b&&(p.current=b)},[b]);const d=Dt({...e,elements:{...o,...u&&{reference:u}}}),E=c.useCallback(g=>{const k=J(g)?{getBoundingClientRect:()=>g.getBoundingClientRect(),getClientRects:()=>g.getClientRects(),contextElement:g}:g;l(k),d.refs.setReference(k)},[d.refs]),R=c.useCallback(g=>{(J(g)||g===null)&&(p.current=g,i(g)),(J(d.refs.reference.current)||d.refs.reference.current===null||g!==null&&!J(g))&&d.refs.setReference(g)},[d.refs]),S=c.useMemo(()=>({...d.refs,setReference:R,setPositionReference:E,domReference:p}),[d.refs,R,E]),w=c.useMemo(()=>({...d.elements,domReference:b}),[d.elements,b]),f=c.useMemo(()=>({...d,...r,refs:S,elements:w,nodeId:t}),[d,S,w,t,r]);return j(()=>{r.dataRef.current.floatingContext=f;const g=x?.nodesRef.current.find(k=>k.id===t);g&&(g.context=f)}),c.useMemo(()=>({...d,context:f,refs:S,elements:w}),[d,S,w,f])}function We(e,t,n){const r=new Map,o=n==="item";let s=e;if(o&&e){const{[tt]:i,[nt]:u,...l}=e;s=l}return{...n==="floating"&&{tabIndex:-1,[gn]:""},...s,...t.map(i=>{const u=i?i[n]:null;return typeof u=="function"?e?u(e):null:u}).concat(e).reduce((i,u)=>(u&&Object.entries(u).forEach(l=>{let[a,b]=l;if(!(o&&[tt,nt].includes(a)))if(a.indexOf("on")===0){if(r.has(a)||r.set(a,[]),typeof b=="function"){var p;(p=r.get(a))==null||p.push(b),i[a]=function(){for(var x,d=arguments.length,E=new Array(d),R=0;R<d;R++)E[R]=arguments[R];return(x=r.get(a))==null?void 0:x.map(S=>S(...E)).find(S=>S!==void 0)}}}else i[a]=b}),i),{})}}function Yn(e){e===void 0&&(e=[]);const t=e.map(u=>u?.reference),n=e.map(u=>u?.floating),r=e.map(u=>u?.item),o=c.useCallback(u=>We(u,e,"reference"),t),s=c.useCallback(u=>We(u,e,"floating"),n),i=c.useCallback(u=>We(u,e,"item"),r);return c.useMemo(()=>({getReferenceProps:o,getFloatingProps:s,getItemProps:i}),[o,s,i])}const Bn=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function Gn(e,t){var n,r;t===void 0&&(t={});const{open:o,elements:s,floatingId:i}=e,{enabled:u=!0,role:l="dialog"}=t,a=He(),b=((n=s.domReference)==null?void 0:n.id)||a,p=c.useMemo(()=>{var f;return((f=qe(s.floating))==null?void 0:f.id)||i},[s.floating,i]),x=(r=Bn.get(l))!=null?r:l,E=Pt()!=null,R=c.useMemo(()=>x==="tooltip"||l==="label"?{["aria-"+(l==="label"?"labelledby":"describedby")]:o?p:void 0}:{"aria-expanded":o?"true":"false","aria-haspopup":x==="alertdialog"?"dialog":x,"aria-controls":o?p:void 0,...x==="listbox"&&{role:"combobox"},...x==="menu"&&{id:b},...x==="menu"&&E&&{role:"menuitem"},...l==="select"&&{"aria-autocomplete":"none"},...l==="combobox"&&{"aria-autocomplete":"list"}},[x,p,E,o,b,l]),S=c.useMemo(()=>{const f={id:p,...x&&{role:x}};return x==="tooltip"||l==="label"?f:{...f,...x==="menu"&&{"aria-labelledby":b}}},[x,p,b,l]),w=c.useCallback(f=>{let{active:g,selected:k}=f;const G={role:"option",...g&&{id:p+"-fui-option"}};switch(l){case"select":case"combobox":return{...G,"aria-selected":k}}return{}},[p,l]);return c.useMemo(()=>u?{reference:R,floating:S,item:w}:{},[u,R,S,w])}export{Kn as F,Gn as a,Hn as b,Yn as c,qn as d,Vn as e,Un as u};
