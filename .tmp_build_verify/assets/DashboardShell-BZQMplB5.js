import{r as o,j as e,u as oe,L as y}from"./react-core-BcR2_z_l.js";import{T as U}from"./ThemedSvgLogo-CGFMwyp6.js";import{d as ne,r as ze,a as Le,D as ee,b as ae,M as $e,c as te,g as Oe,e as P,f as He,L as Ke,h as Ge,H as We,i as qe}from"./Footer-C9y59CM9.js";import{A as O,a as H,b as K}from"./avatar-CVZSwVae.js";import{B as Ve}from"./badge-CX6RuieY.js";import{B as G}from"./button-C7iHbTqw.js";import{t as re}from"./use-toast-DeMRPCeJ.js";import{S as A}from"./index-Xj-Q384k.js";import{c as ie}from"./index-CwaKb5FF.js";import{c as l,T as Fe,v as Xe,w as Qe,x as Ye,g as Je,b as Ze,d as T}from"./index-ntR5v_s2.js";import{R as Ue,P as ea,C as de,a as aa,T as le,D as ce,O as ue,I as ta}from"./input-BfSJiKKQ.js";import{S as ra}from"./separator-CDy1CE57.js";import{X as sa}from"./x-BpqL4Bns.js";import{S as se}from"./skeleton-DbpZ9Rjt.js";import{c as oa}from"./createLucideIcon-M1JG7EBz.js";import{s as na,a as ia,r as da,b as la}from"./search-ranking-cq4don08.js";import{u as ca}from"./use-dynamic-synopsis-clamp-DpjBDBPb.js";import{s as ua}from"./url-safety-Py24cS-5.js";import{r as ba,b as pa}from"./access-control-C6qZ0ZhA.js";const fa=oa("PanelLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]),z=768;function be(){const[r,t]=o.useState(void 0);return o.useEffect(()=>{const s=window.matchMedia(`(max-width: ${z-1}px)`),i=()=>{t(window.innerWidth<z)};return s.addEventListener("change",i),t(window.innerWidth<z),()=>s.removeEventListener("change",i)},[]),!!r}const ma=Ue,ha=ea,pe=o.forwardRef(({className:r,...t},s)=>e.jsx(ue,{className:l("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...t,ref:s}));pe.displayName=ue.displayName;const xa=ie("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),fe=o.forwardRef(({side:r="right",className:t,children:s,...i},n)=>e.jsxs(ha,{children:[e.jsx(pe,{}),e.jsxs(de,{ref:n,className:l(xa({side:r}),t),...i,children:[s,e.jsxs(aa,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-secondary hover:opacity-100 focus:outline-hidden focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[e.jsx(sa,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));fe.displayName=de.displayName;const me=o.forwardRef(({className:r,...t},s)=>e.jsx(le,{ref:s,className:l("text-lg font-semibold text-foreground",r),...t}));me.displayName=le.displayName;const he=o.forwardRef(({className:r,...t},s)=>e.jsx(ce,{ref:s,className:l("text-sm text-muted-foreground",r),...t}));he.displayName=ce.displayName;const ga="sidebar:state",va=3600*24*7,L="16rem",wa="18rem",$="3rem",ja="b",xe=o.createContext(null);function _(){const r=o.useContext(xe);if(!r)throw new Error("useSidebar must be used within a SidebarProvider.");return r}const ge=o.forwardRef(({defaultOpen:r=!0,open:t,onOpenChange:s,className:i,style:n,children:u,...j},N)=>{const m=be(),[p,g]=o.useState(!1),[v,R]=o.useState(r),w=t??v,f=o.useCallback(h=>{const x=typeof h=="function"?h(w):h;s?s(x):R(x),document.cookie=`${ga}=${x}; path=/; max-age=${va}`},[s,w]),S=o.useCallback(()=>m?g(h=>!h):f(h=>!h),[m,f,g]);o.useEffect(()=>{const h=x=>{const k=x.target;k&&(k.closest('[data-lexical-editor="true"]')||k.closest('input, textarea, select, [contenteditable="true"]'))||x.key===ja&&(x.metaKey||x.ctrlKey)&&(x.preventDefault(),S())};return window.addEventListener("keydown",h),()=>window.removeEventListener("keydown",h)},[S]);const M=w?"expanded":"collapsed",c=o.useMemo(()=>({state:M,open:w,setOpen:f,isMobile:m,openMobile:p,setOpenMobile:g,toggleSidebar:S}),[M,w,f,m,p,g,S]);return e.jsx(xe.Provider,{value:c,children:e.jsx(Fe,{delayDuration:0,children:e.jsx("div",{style:{"--sidebar-width":L,"--sidebar-width-icon":$,"--sidebar-width-current":m?"0px":w?L:$,"--sidebar-offset":m?"0px":w?`calc(${L} + 0.5rem)`:`calc(${$} + 1.8125rem)`,...n},className:l("group/sidebar-wrapper flex min-h-svh w-full has-data-[variant=inset]:bg-sidebar",i),ref:N,...j,children:u})})})});ge.displayName="SidebarProvider";const ve=o.forwardRef(({side:r="left",variant:t="sidebar",collapsible:s="offcanvas",className:i,children:n,...u},j)=>{const{isMobile:N,state:m,openMobile:p,setOpenMobile:g}=_();return s==="none"?e.jsx("div",{className:l("flex h-full w-(--sidebar-width) flex-col bg-sidebar text-sidebar-foreground",i),ref:j,...u,children:n}):N?e.jsx(ma,{open:p,onOpenChange:g,...u,children:e.jsxs(fe,{"data-sidebar":"sidebar","data-mobile":"true",className:"w-(--sidebar-width) bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden",style:{"--sidebar-width":wa},side:r,children:[e.jsx(me,{className:"sr-only",children:"Sidebar navigation"}),e.jsx(he,{className:"sr-only",children:"Main navigation menu for mobile screens."}),e.jsx("div",{className:"flex h-full w-full flex-col",children:n})]})}):e.jsxs("div",{ref:j,className:"group peer hidden text-sidebar-foreground md:block","data-state":m,"data-collapsible":m==="collapsed"?s:"","data-variant":t,"data-side":r,children:[e.jsx("div",{className:l("relative h-svh w-(--sidebar-width) bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",t==="floating"||t==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4)))]":"group-data-[collapsible=icon]:w-(--sidebar-width-icon)")}),e.jsx("div",{className:l("fixed inset-y-0 z-30 hidden h-svh w-(--sidebar-width) transition-[left,right,width] duration-200 ease-linear md:flex",r==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",t==="floating"||t==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4))+2px)]":"group-data-[collapsible=icon]:w-(--sidebar-width-icon) group-data-[side=left]:border-r group-data-[side=right]:border-l",i),...u,children:e.jsx("div",{"data-sidebar":"sidebar",className:"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow-sm",children:n})})]})});ve.displayName="Sidebar";const we=o.forwardRef(({className:r,onClick:t,...s},i)=>{const{toggleSidebar:n}=_();return e.jsxs(G,{ref:i,"data-sidebar":"trigger",variant:"ghost",size:"icon",className:l("h-7 w-7",r),onClick:u=>{t?.(u),n()},...s,children:[e.jsx(fa,{}),e.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})});we.displayName="SidebarTrigger";const Na=o.forwardRef(({className:r,...t},s)=>{const{toggleSidebar:i}=_();return e.jsx("button",{ref:s,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:i,title:"Toggle Sidebar",className:l("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] group-data-[side=left]:-right-4 group-data-[side=right]:left-0 hover:after:bg-sidebar-border sm:flex","in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full hover:group-data-[collapsible=offcanvas]:bg-sidebar","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",r),...t})});Na.displayName="SidebarRail";const je=o.forwardRef(({className:r,...t},s)=>e.jsx("main",{ref:s,className:l("relative flex min-h-svh flex-1 flex-col bg-background","peer-data-[variant=inset]:min-h-[calc(100svh-(--spacing(4)))] md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm",r),...t}));je.displayName="SidebarInset";const ya=o.forwardRef(({className:r,...t},s)=>e.jsx(ta,{ref:s,"data-sidebar":"input",className:l("h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",r),...t}));ya.displayName="SidebarInput";const Ne=o.forwardRef(({className:r,...t},s)=>e.jsx("div",{ref:s,"data-sidebar":"header",className:l("flex flex-col gap-2 p-2",r),...t}));Ne.displayName="SidebarHeader";const ye=o.forwardRef(({className:r,...t},s)=>e.jsx("div",{ref:s,"data-sidebar":"footer",className:l("flex flex-col gap-2 p-2",r),...t}));ye.displayName="SidebarFooter";const Se=o.forwardRef(({className:r,...t},s)=>e.jsx(ra,{ref:s,"data-sidebar":"separator",className:l("mx-2 w-auto bg-sidebar-border",r),...t}));Se.displayName="SidebarSeparator";const ke=o.forwardRef(({className:r,...t},s)=>e.jsx("div",{ref:s,"data-sidebar":"content",className:l("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",r),...t}));ke.displayName="SidebarContent";const Sa=o.forwardRef(({className:r,...t},s)=>e.jsx("div",{ref:s,"data-sidebar":"group",className:l("relative flex w-full min-w-0 flex-col p-2",r),...t}));Sa.displayName="SidebarGroup";const ka=o.forwardRef(({className:r,asChild:t=!1,...s},i)=>{const n=t?A:"div";return e.jsx(n,{ref:i,"data-sidebar":"group-label",className:l("flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-hidden ring-sidebar-ring transition-[margin,opa] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",r),...s})});ka.displayName="SidebarGroupLabel";const Ma=o.forwardRef(({className:r,asChild:t=!1,...s},i)=>{const n=t?A:"button";return e.jsx(n,{ref:i,"data-sidebar":"group-action",className:l("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-hidden ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 md:after:hidden","group-data-[collapsible=icon]:hidden",r),...s})});Ma.displayName="SidebarGroupAction";const Ca=o.forwardRef(({className:r,...t},s)=>e.jsx("div",{ref:s,"data-sidebar":"group-content",className:l("w-full text-sm",r),...t}));Ca.displayName="SidebarGroupContent";const W=o.forwardRef(({className:r,...t},s)=>e.jsx("ul",{ref:s,"data-sidebar":"menu",className:l("flex w-full min-w-0 flex-col gap-1",r),...t}));W.displayName="SidebarMenu";const q=o.forwardRef(({className:r,...t},s)=>e.jsx("li",{ref:s,"data-sidebar":"menu-item",className:l("group/menu-item relative",r),...t}));q.displayName="SidebarMenuItem";const Ra=ie("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding,transform,opacity] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! group-data-[collapsible=icon]:justify-center! group-data-[collapsible=icon]:text-center! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:p-0!"}},defaultVariants:{variant:"default",size:"default"}}),V=o.forwardRef(({asChild:r=!1,isActive:t=!1,variant:s="default",size:i="default",tooltip:n,className:u,...j},N)=>{const m=r?A:"button",{isMobile:p,state:g}=_(),v=e.jsx(m,{ref:N,"data-sidebar":"menu-button","data-size":i,"data-active":t,className:l(Ra({variant:s,size:i}),u),...j});return n?(typeof n=="string"&&(n={children:n}),e.jsxs(Xe,{children:[e.jsx(Qe,{asChild:!0,children:v}),e.jsx(Ye,{side:"right",align:"center",hidden:g!=="collapsed"||p,...n})]})):v});V.displayName="SidebarMenuButton";const Ia=o.forwardRef(({className:r,asChild:t=!1,showOnHover:s=!1,...i},n)=>{const u=t?A:"button";return e.jsx(u,{ref:n,"data-sidebar":"menu-action",className:l("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-hidden ring-sidebar-ring transition-transform peer-hover/menu-button:text-sidebar-accent-foreground hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 md:after:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",s&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",r),...i})});Ia.displayName="SidebarMenuAction";const Aa=o.forwardRef(({className:r,...t},s)=>e.jsx("div",{ref:s,"data-sidebar":"menu-badge",className:l("pointer-events-none absolute right-1 flex h-5 min-w-5 select-none items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",r),...t}));Aa.displayName="SidebarMenuBadge";const Da=o.forwardRef(({className:r,showIcon:t=!1,...s},i)=>{const n=o.useMemo(()=>`${Math.floor(Math.random()*40)+50}%`,[]);return e.jsxs("div",{ref:i,"data-sidebar":"menu-skeleton",className:l("flex h-8 items-center gap-2 rounded-md px-2",r),...s,children:[t&&e.jsx(se,{className:"size-4 rounded-md","data-sidebar":"menu-skeleton-icon"}),e.jsx(se,{className:"h-4 max-w-(--skeleton-width) flex-1","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":n}})]})});Da.displayName="SidebarMenuSkeleton";const Ta=o.forwardRef(({className:r,...t},s)=>e.jsx("ul",{ref:s,"data-sidebar":"menu-sub",className:l("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",r),...t}));Ta.displayName="SidebarMenuSub";const _a=o.forwardRef(({...r},t)=>e.jsx("li",{ref:t,...r}));_a.displayName="SidebarMenuSubItem";const Ba=o.forwardRef(({asChild:r=!1,size:t="md",isActive:s,className:i,...n},u)=>{const j=r?A:"a";return e.jsx(j,{ref:u,"data-sidebar":"menu-sub-button","data-size":t,"data-active":s,className:l("flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-hidden ring-sidebar-ring aria-disabled:pointer-events-none aria-disabled:opacity-50 hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground",t==="sm"&&"text-xs",t==="md"&&"text-sm","group-data-[collapsible=icon]:hidden",i),...n})});Ba.displayName="SidebarMenuSubButton";const Ea=({currentUser:r,menuItems:t=ne,className:s})=>{const i=oe(),n=Je(),{settings:u}=Ze(),j=be(),[N,m]=o.useState(!1),[p,g]=o.useState(!1),[v,R]=o.useState(""),[w,f]=o.useState([]),[S,M]=o.useState([]),[c,h]=o.useState({}),x=o.useRef(null),k=o.useMemo(()=>{const a=t.find(b=>b.href===i.pathname);return a||(t.find(b=>b.href!=="/dashboard"&&i.pathname.startsWith(`${b.href}/`))??t.find(b=>b.href==="/dashboard")??null)},[i.pathname,t]),C=(u.site.name||"Nekomata").toUpperCase(),D=ze(u).assets.symbolUrl,F=o.useMemo(()=>Array.isArray(u.navbar.links)?u.navbar.links.map(a=>({label:String(a?.label||"").trim(),href:ua(a?.href)||"",icon:String(a?.icon||"").trim()})).filter(a=>a.label&&a.href):[],[u.navbar.links]),Me="border-border/70 bg-popover/95 text-popover-foreground shadow-xl backdrop-blur-xs",Ce="focus:bg-accent focus:text-accent-foreground",B=a=>a.startsWith("/")&&!a.startsWith("//"),X=a=>(a.split(/[?#]/,1)[0]||"/").replace(/\/+$/,"")||"/",Re=a=>{if(!B(a))return!1;const d=X(i.pathname),b=X(a);return b==="/"?d==="/":d===b||d.startsWith(`${b}/`)},Q=r?.name||r?.username||"Conta",Ie=(r?.name||r?.username||"??").split(" ").filter(Boolean).slice(0,2).map(a=>a[0]).join("").toUpperCase(),Y=o.useMemo(()=>w.map(a=>({label:a.title,href:`/projeto/${a.id}`,image:a.cover,synopsis:a.synopsis,tags:na(ia(a.tags.map(d=>c[d]||d)),2,18)})),[w,c]),J=o.useMemo(()=>S.map(a=>({label:a.title,href:`/postagem/${a.slug}`,excerpt:a.excerpt||""})),[S]),I=o.useMemo(()=>v.trim()?da(Y,v):[],[Y,v]),E=o.useMemo(()=>v.trim()?la(J,v):[],[J,v]),Z=p&&v.trim().length>0,Ae=I.length>0||E.length>0,De=o.useMemo(()=>I.map(a=>a.href),[I]),{rootRef:Te,lineByKey:_e}=ca({enabled:Z,keys:De,maxLines:4}),Be=a=>{const d=_e[a]??2;return d<=0?"hidden":d===1?"line-clamp-1":d===2?"line-clamp-2":d===3?"line-clamp-3":"line-clamp-4"};o.useEffect(()=>{const a=d=>{x.current&&!x.current.contains(d.target)&&(g(!1),R(""))};return p&&document.addEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}},[p]),o.useEffect(()=>{(async()=>{try{const d=await T(n,"/api/public/projects");if(!d.ok)return;const b=await d.json();f(Array.isArray(b.projects)?b.projects:[])}catch{f([])}})()},[n]),o.useEffect(()=>{(async()=>{try{const d=await T(n,"/api/public/posts");if(!d.ok)return;const b=await d.json();M(Array.isArray(b.posts)?b.posts:[])}catch{M([])}})()},[n]),o.useEffect(()=>{(async()=>{try{const d=await T(n,"/api/public/tag-translations",{cache:"no-store"});if(!d.ok)return;const b=await d.json();h(b.tags||{})}catch{h({})}})()},[n]);const Ee=async()=>{if(!N){m(!0);try{if(!(await T(n,"/api/logout",{method:"POST",auth:!0})).ok){re({title:"Não foi possível sair",description:"Tente novamente em alguns instantes.",variant:"destructive"});return}window.location.href="/"}catch{re({title:"Não foi possível sair",description:"Ocorreu um erro inesperado ao encerrar a sessão.",variant:"destructive"})}finally{m(!1)}}};return e.jsx("header",{style:{left:j?"0px":"calc(var(--sidebar-offset) - (0.3125rem + min(0.1875rem, max(0rem, calc(var(--sidebar-width-current) - var(--sidebar-width-icon))))))"},className:l("fixed left-0 right-0 top-0 z-40 bg-sidebar",s),children:e.jsxs("div",{className:"relative flex h-19 items-center justify-between gap-2 px-3 sm:px-4 lg:px-6 2xl:px-8",children:[e.jsxs("div",{"data-testid":"dashboard-header-left-cluster",className:l("flex min-w-0 items-center gap-2 transition-all duration-300 lg:gap-3",p?"opacity-0 invisible pointer-events-none xl:opacity-100 xl:visible xl:pointer-events-auto":"opacity-100 visible pointer-events-auto"),children:[e.jsx(we,{className:"h-9 w-9 rounded-lg border border-border/60 bg-card/60 text-foreground/80 hover:bg-accent hover:text-accent-foreground"}),e.jsxs(y,{to:"/dashboard","data-testid":"dashboard-header-mobile-logo",className:"flex h-9 w-9 items-center justify-center rounded-lg border border-border/60 bg-card/60 text-foreground/85 transition hover:bg-accent xl:hidden",children:[D?e.jsx(U,{url:D,label:C,className:"h-6 w-6 rounded-full object-cover text-primary"}):e.jsx("span",{className:"flex h-6 w-6 items-center justify-center rounded-full border border-border/70 bg-card/70 text-[11px] font-semibold",children:C.slice(0,1)}),e.jsx("span",{className:"sr-only",children:C})]}),e.jsxs(y,{to:"/dashboard",className:"hidden items-center gap-2 rounded-lg border border-border/60 bg-card/60 px-2.5 py-1.5 text-foreground/85 transition hover:bg-accent xl:flex",children:[D?e.jsx(U,{url:D,label:C,className:"h-6 w-6 rounded-full object-cover text-primary"}):e.jsx("span",{className:"flex h-6 w-6 items-center justify-center rounded-full border border-border/70 bg-card/70 text-[11px] font-semibold",children:C.slice(0,1)}),e.jsx("span",{className:"max-w-44 truncate text-[11px] font-semibold uppercase tracking-[0.2em]",children:C})]}),e.jsxs("div",{className:"min-w-0 hidden lg:block",children:[e.jsx("p",{className:"text-[10px] uppercase tracking-[0.28em] text-muted-foreground",children:"Painel interno"}),e.jsx("p",{className:"truncate text-sm font-semibold text-foreground",children:k?.label||"Dashboard"})]})]}),e.jsxs("div",{className:"flex shrink-0 items-center gap-2 sm:gap-3 lg:gap-4",children:[e.jsx("div",{className:"hidden 2xl:flex items-center gap-5 text-sm font-medium text-foreground/80",children:F.map(a=>{const d=B(a.href),Pe=`transition-colors ${Re(a.href)?"text-foreground font-semibold":"text-foreground/80 hover:text-foreground"}`;return d?e.jsx(y,{to:a.href,className:Pe,children:a.label},`${a.label}-${a.href}`):e.jsx("a",{href:a.href,className:"text-foreground/80 transition-colors hover:text-foreground",target:"_blank",rel:"noopener noreferrer",children:a.label},`${a.label}-${a.href}`)})}),e.jsxs("div",{ref:x,"data-testid":"dashboard-header-search-cluster",className:l("relative z-20 flex shrink-0 items-center gap-2 transition-all duration-300",p?"absolute inset-x-0 top-1/2 z-30 mx-auto w-[min(22rem,calc(100vw-1rem))] -translate-y-1/2 xl:static xl:w-auto xl:translate-y-0":"w-auto"),children:[e.jsxs("div",{className:`flex items-center gap-2 rounded-full border border-transparent bg-secondary/30 px-3 py-2 transition-all duration-300 ${p?"w-full border-border bg-secondary/70 xl:w-52 2xl:w-64":"w-11"}`,children:[e.jsx("button",{type:"button","aria-label":"Abrir pesquisa",onClick:()=>g(a=>!a),className:"text-foreground transition-colors hover:text-primary",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-4 w-4",children:[e.jsx("circle",{cx:"11",cy:"11",r:"8"}),e.jsx("path",{d:"m21 21-4.3-4.3"})]})}),p&&e.jsx("input",{autoFocus:!0,value:v,onChange:a=>R(a.target.value),placeholder:"Pesquisar projetos e posts",className:"w-full bg-transparent text-sm text-foreground outline-hidden placeholder:text-muted-foreground"})]}),Z&&e.jsxs("div",{ref:Te,"data-testid":"dashboard-header-results",className:"search-popover-enter absolute top-12 left-0 right-0 mx-auto max-h-[78vh] w-[min(24rem,calc(100vw-1rem))] overflow-hidden rounded-xl border border-border/60 bg-background/95 p-4 shadow-lg backdrop-blur-sm xl:left-auto xl:right-0 xl:mx-0 xl:w-80",children:[I.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-muted-foreground",children:"Projetos"}),e.jsx("ul",{className:"no-scrollbar mt-3 max-h-[44vh] space-y-3 overflow-y-auto overscroll-contain pr-1",children:I.map(a=>e.jsx("li",{children:e.jsxs(y,{to:a.href,className:"group flex h-36 items-start gap-4 overflow-hidden rounded-xl border border-border/60 bg-gradient-card p-4 transition hover:border-primary/40 hover:bg-primary/5",children:[e.jsx("div",{className:"w-20 shrink-0 self-start overflow-hidden rounded-lg bg-secondary",style:{aspectRatio:"46 / 65"},children:e.jsx("img",{src:a.image,alt:a.label,className:"h-full w-full object-cover transition-transform duration-300 group-hover:scale-105"})}),e.jsxs("div",{"data-synopsis-role":"column","data-synopsis-key":a.href,className:"min-w-0 h-full flex flex-col",children:[e.jsx("p",{"data-synopsis-role":"title",className:"line-clamp-1 shrink-0 text-sm font-semibold text-foreground group-hover:text-primary",children:a.label}),e.jsx("p",{className:l("mt-1 overflow-hidden text-xs leading-snug text-muted-foreground",Be(a.href)),"data-synopsis-role":"synopsis",children:a.synopsis}),a.tags.length>0&&e.jsx("div",{"data-synopsis-role":"badges",className:"mt-auto pt-2 flex min-w-0 flex-wrap gap-1.5",children:a.tags.map(d=>e.jsx(Ve,{variant:"secondary",className:"text-[9px] uppercase whitespace-nowrap",children:d},d))})]})]})},a.href))})]}),E.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-muted-foreground",children:"Posts"}),e.jsx("ul",{className:"no-scrollbar mt-2 max-h-[26vh] space-y-2 overflow-y-auto overscroll-contain pr-1",children:E.map(a=>e.jsx("li",{children:e.jsx(y,{to:a.href,className:"text-sm text-foreground transition-colors hover:text-primary",children:a.label})},a.href))})]}),!Ae&&e.jsx("p",{className:"text-sm text-muted-foreground",children:"Nenhum resultado encontrado para a sua pesquisa."})]})]}),e.jsxs("div",{"data-testid":"dashboard-header-actions-cluster",className:l("flex shrink-0 items-center gap-2 transition-all duration-300 sm:gap-3 lg:gap-4",p?"opacity-0 invisible pointer-events-none xl:opacity-100 xl:visible xl:pointer-events-auto":"opacity-100 visible pointer-events-auto"),children:[e.jsx(Le,{}),e.jsxs(ee,{children:[e.jsx(ae,{asChild:!0,children:e.jsx(G,{variant:"ghost",size:"icon",className:"h-10 w-10 rounded-full border border-border/60 bg-card/50 text-foreground/85 hover:bg-accent hover:text-accent-foreground 2xl:hidden","aria-label":"Abrir menu",children:e.jsx($e,{className:"h-5 w-5"})})}),e.jsx(te,{align:"end",className:`w-48 ${Me}`,children:F.map(a=>{const d=Oe(a.icon);return e.jsx(P,{asChild:!0,className:Ce,children:B(a.href)?e.jsxs(y,{to:a.href,className:"flex items-center gap-2",children:[e.jsx(d,{className:"h-4 w-4"}),a.label]}):e.jsxs("a",{href:a.href,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2",children:[e.jsx(d,{className:"h-4 w-4"}),a.label]})},`${a.label}-${a.href}`)})})]}),e.jsxs(ee,{modal:!1,children:[e.jsx(ae,{asChild:!0,children:e.jsxs(G,{variant:"ghost",className:"h-10 rounded-full border border-border/60 bg-card/50 px-2 text-foreground hover:bg-accent",children:[e.jsxs(O,{className:"h-8 w-8 border border-border/70",children:[r?.avatarUrl?e.jsx(H,{src:r.avatarUrl,alt:Q}):null,e.jsx(K,{className:"bg-card/80 text-xs text-foreground",children:Ie})]}),e.jsx("span",{className:"hidden max-w-40 truncate text-sm font-medium text-foreground xl:inline",children:Q})]})}),e.jsxs(te,{align:"end",className:"w-56 border-border/70 bg-popover/95 text-popover-foreground shadow-xl backdrop-blur-xs",children:[t.filter(a=>a.enabled).map(a=>{const d=a.icon;return e.jsx(P,{asChild:!0,className:"focus:bg-accent focus:text-accent-foreground",children:e.jsxs(y,{to:a.href,className:"flex items-center gap-2",children:[e.jsx(d,{className:"h-4 w-4"}),a.label]})},a.href)}),e.jsx(He,{className:"bg-border/70"}),e.jsxs(P,{onClick:Ee,disabled:N,className:"focus:bg-accent focus:text-accent-foreground",children:[e.jsx(Ke,{className:"h-4 w-4"}),N?"Saindo...":"Sair"]})]})]})]})]})]})})},tt=({children:r,currentUser:t,isLoadingUser:s=!1,menuItems:i=null,onUserCardClick:n,userLabel:u,userSubLabel:j,onMenuItemClick:N})=>{const m=oe(),p=o.useMemo(()=>{if(Array.isArray(i))return i.filter(h=>h.enabled);const c=ba(t||null);return pa(ne,c)},[t,i]),g=u??(s?"Carregando usuario...":t?.name??"Usuario"),v=j??(t?.username?`@${t.username}`:"Dashboard"),w=(t?.name??t?.username??"").split(" ").filter(Boolean).slice(0,2).map(c=>c[0]).join("").toUpperCase()||"??",f=!!n;return e.jsx("div",{className:"min-h-screen overflow-x-hidden bg-background text-foreground",children:e.jsxs(ge,{defaultOpen:!0,children:[e.jsxs(ve,{variant:"inset",collapsible:"icon",children:[e.jsxs(Ne,{className:"gap-3 px-2 pb-2 pt-3 transition-all duration-200 ease-linear group-data-[collapsible=icon]:gap-2 group-data-[collapsible=icon]:items-center",children:[e.jsxs(y,{to:"/dashboard",className:"group flex items-center gap-3 rounded-xl border border-sidebar-border/80 bg-sidebar-accent/20 p-3 transition hover:border-sidebar-ring/40 hover:bg-sidebar-accent/35",children:[e.jsx("span",{className:"flex h-9 w-9 shrink-0 items-center justify-center rounded-lg border border-sidebar-border/70 bg-sidebar-primary/15 text-sidebar-primary",children:e.jsx(Ge,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex min-w-0 flex-col group-data-[collapsible=icon]:hidden",children:[e.jsx("span",{className:"truncate text-sm font-semibold text-sidebar-foreground",children:"Dashboard"}),e.jsx("span",{className:"text-xs text-sidebar-foreground/65",children:"Painel de gestao"})]})]}),e.jsxs("div",{className:`flex items-center gap-3 rounded-xl border border-sidebar-border/80 bg-sidebar-accent/20 p-3 transition hover:border-sidebar-ring/40 hover:bg-sidebar-accent/35 group-data-[collapsible=icon]:hidden ${f?"cursor-pointer":"cursor-default"}`,role:f?"button":void 0,tabIndex:f?0:void 0,onClick:f?n:void 0,onKeyDown:c=>{f&&(c.key==="Enter"||c.key===" ")&&(c.preventDefault(),n?.())},children:[e.jsxs(O,{className:"h-11 w-11 border border-sidebar-border",children:[t?.avatarUrl?e.jsx(H,{src:t.avatarUrl,alt:g}):null,e.jsx(K,{className:"bg-sidebar-primary/10 text-xs text-sidebar-foreground",children:w})]}),e.jsxs("div",{className:"flex flex-1 flex-col",children:[e.jsx("span",{className:"text-sm font-semibold text-sidebar-foreground",children:g}),e.jsx("span",{className:"text-xs text-sidebar-foreground/70",children:v})]})]}),e.jsx("div",{className:`hidden items-center justify-center rounded-xl border border-sidebar-border/80 bg-sidebar-accent/20 p-2 transition hover:border-sidebar-ring/40 hover:bg-sidebar-accent/35 group-data-[collapsible=icon]:flex ${f?"cursor-pointer":"cursor-default"}`,role:f?"button":void 0,tabIndex:f?0:void 0,onClick:f?n:void 0,onKeyDown:c=>{f&&(c.key==="Enter"||c.key===" ")&&(c.preventDefault(),n?.())},children:e.jsxs(O,{className:"h-8 w-8 border border-sidebar-border shadow-xs",children:[t?.avatarUrl?e.jsx(H,{src:t.avatarUrl,alt:g}):null,e.jsx(K,{className:"bg-sidebar-primary/10 text-[10px] text-sidebar-foreground",children:w})]})})]}),e.jsx(Se,{className:"my-2"}),e.jsx(ke,{className:"px-2 pb-2",children:e.jsx(W,{className:"gap-1.5",children:p.map(c=>{const h=m.pathname===c.href||c.href!=="/dashboard"&&m.pathname.startsWith(`${c.href}/`),x=c.icon;return e.jsx(q,{children:e.jsx(V,{asChild:!0,isActive:h,tooltip:c.label,disabled:!c.enabled,className:"h-10 rounded-xl text-sidebar-foreground/80 hover:text-sidebar-foreground data-[active=true]:bg-sidebar-primary/15 data-[active=true]:text-sidebar-foreground data-[active=true]:shadow-[inset_0_0_0_1px_hsl(var(--sidebar-ring)/0.35)]",children:c.enabled?e.jsxs(y,{to:c.href,onClick:N?k=>N(c,k):void 0,children:[e.jsx(x,{}),e.jsx("span",{className:"group-data-[collapsible=icon]:hidden",children:c.label})]}):e.jsxs("button",{type:"button","aria-disabled":"true",disabled:!0,children:[e.jsx(x,{}),e.jsx("span",{className:"group-data-[collapsible=icon]:hidden",children:c.label})]})})},c.href)})})}),e.jsx(ye,{className:"px-2 pb-3 pt-1",children:e.jsx(W,{children:e.jsx(q,{children:e.jsx(V,{asChild:!0,tooltip:"Voltar ao site",className:"h-10 rounded-xl text-sidebar-foreground/80 hover:text-sidebar-foreground",children:e.jsxs(y,{to:"/",children:[e.jsx(We,{}),e.jsx("span",{className:"group-data-[collapsible=icon]:hidden",children:"Voltar ao site"})]})})})})})]}),e.jsxs(je,{className:"min-w-0 overflow-x-hidden flex min-h-screen flex-col bg-linear-to-b from-background via-[hsl(var(--primary)/0.12)] to-background text-foreground md:peer-data-[variant=inset]:shadow-none md:peer-data-[variant=inset]:rounded-none",children:[e.jsx(Ea,{currentUser:t,menuItems:p}),e.jsx("div",{className:"min-w-0 w-full flex-1",children:r}),e.jsx(qe,{})]})]})})};export{tt as D};
