const g=new Intl.Collator("pt-BR",{sensitivity:"base"}),i=s=>String(s||"").normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().trim(),f=(s,e)=>g.compare(String(s||""),String(e||"")),x=s=>[...s].sort(f),y=(s,e=3,r=18)=>{const n=[];for(const a of s){if(n.length>=e)break;const t=String(a||"").replace(/\s+/g," ").trim();t&&(Array.from(t).length>r||n.push(t))}return n},b=s=>i(s).split(/[^a-z0-9]+/g).filter(Boolean),W=(s,e)=>s.includes(e),d=(s,e)=>b(s).some(r=>r.startsWith(e)),h=(s,e,r)=>{const n=i(s);return!n||!e?0:n.startsWith(e)?r.startsWith:d(n,e)?r.wordStartsWith:W(n,e)?r.includes:0},T=(s,e)=>{let r=0;return s.forEach(n=>{const a=i(n);if(a){if(a.startsWith(e)){r=Math.max(r,48);return}if(d(a,e)){r=Math.max(r,38);return}a.includes(e)&&(r=Math.max(r,28))}}),r},p=(s,e)=>s.some(r=>i(r).includes(e)),S=(s,e)=>{const r=i(e);if(!r)return[];const n=r.split(/\s+/).filter(Boolean),a=[];return s.forEach(t=>{const o=[t.label,t.synopsis||"",...Array.isArray(t.tags)?t.tags:[]];if(!n.every(c=>p(o,c)))return;let l=0;n.forEach(c=>{l+=h(t.label,c,{startsWith:140,wordStartsWith:110,includes:80}),l+=T(t.tags||[],c),l+=h(t.synopsis||"",c,{startsWith:24,wordStartsWith:18,includes:12})});const u=i(t.label).length;l+=Math.max(0,24-Math.min(u,24)),a.push({item:t,score:l})}),a.sort((t,o)=>o.score!==t.score?o.score-t.score:f(t.item.label,o.item.label)),a.map(t=>t.item)},A=(s,e)=>{const r=i(e);if(!r)return[];const n=r.split(/\s+/).filter(Boolean),a=[];return s.forEach(t=>{const o=[t.label,t.excerpt||""];if(!n.every(c=>p(o,c)))return;let l=0;n.forEach(c=>{l+=h(t.label,c,{startsWith:140,wordStartsWith:105,includes:74}),l+=h(t.excerpt||"",c,{startsWith:20,wordStartsWith:14,includes:10})});const u=i(t.label).length;l+=Math.max(0,20-Math.min(u,20)),a.push({item:t,score:l})}),a.sort((t,o)=>o.score!==t.score?o.score-t.score:f(t.item.label,o.item.label)),a.map(t=>t.item)};export{x as a,A as b,f as c,S as r,y as s};
