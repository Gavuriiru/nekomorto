import{u as m,k as u,r as c,j as e,L as x}from"./react-core-BcR2_z_l.js";import{B as p}from"./button-C7iHbTqw.js";import{B as l}from"./badge-CX6RuieY.js";import{g as h,d as g}from"./index-ntR5v_s2.js";import{u as f}from"./use-page-meta-ewLab265.js";import"./index-Xj-Q384k.js";import"./index-CwaKb5FF.js";import"./mui-WkDK9qS1.js";const A=()=>{f({title:"Login",noIndex:!0});const s=m(),t=u(),o=c.useMemo(()=>new URLSearchParams(s.search),[s.search]),d=o.get("error"),i=o.get("next"),a=h();c.useEffect(()=>{let r=!0;return(async()=>{try{if(!(await g(a,"/api/me",{auth:!0})).ok)return;r&&t("/dashboard",{replace:!0})}catch{}})(),()=>{r=!1}},[a,t]);const n=(()=>{switch(d){case"unauthorized":return"Seu usuário ainda não tem acesso liberado.";case"state_mismatch":return"Falha de segurança na autenticação. Tente novamente.";case"token_exchange_failed":return"Não foi possível concluir a autenticação.";case"user_fetch_failed":return"Não foi possível buscar seus dados.";case"missing_code":return"Autenticação cancelada ou incompleta.";case"server_error":return"Erro interno no servidor de autenticação.";default:return null}})();return e.jsxs("div",{className:"login-shell text-foreground",children:[e.jsx("div",{"aria-hidden":!0,className:"login-backdrop"}),e.jsx("main",{className:"relative pt-28",children:e.jsx("section",{className:"mx-auto w-full max-w-3xl px-6 pb-20 md:px-10",children:e.jsx("div",{className:"login-card animate-fade-in",children:e.jsx("div",{className:"login-card-content animate-slide-up",children:e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(l,{className:"border border-border/65 bg-card/75 text-muted-foreground",children:"Acesso restrito"}),e.jsx(l,{className:"border border-primary/30 bg-primary/18 text-primary",children:"Discord"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h1",{className:"text-3xl font-semibold lg:text-4xl",children:"Autorização Necessária"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Faça o seu login para acessar a plataforma."})]}),n&&e.jsx("div",{role:"alert","aria-live":"polite",className:"login-alert",children:n}),e.jsxs("div",{className:"login-actions",children:[e.jsx(p,{className:"w-full bg-primary text-primary-foreground shadow-[0_16px_34px_-24px_hsl(var(--primary)/0.85)] hover:bg-primary/90 sm:w-auto",onClick:()=>{const r=i?`${a}/auth/discord?next=${encodeURIComponent(i)}`:`${a}/auth/discord`;window.location.href=r},children:"Entrar com Discord"}),e.jsx(x,{to:"/",className:"text-sm text-muted-foreground hover:text-foreground",children:"Voltar"})]})]})})})})})]})};export{A as default};
