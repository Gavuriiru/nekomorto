const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LexicalEditor-DwJ9fzpw.js","assets/react-core-BcR2_z_l.js","assets/lexical-CVusBMfS.js","assets/playground-overrides-BL6rcNro.js","assets/ContentEditable-BX3pcmlG.js","assets/ContentEditable-CWrSnP84.css","assets/PlaygroundNodes-ChCl_XRL.js","assets/index-ntR5v_s2.js","assets/mui-WkDK9qS1.js","assets/index-yv2-JTMp.css","assets/PlaygroundNodes-CkHyeEbx.css","assets/PollContext-CEXjjzNp.js","assets/PollContext-DlEuYIz7.css","assets/ImageLibraryDialog-BbbI0q6f.js","assets/index-CHWtszJ3.js","assets/index-BMIt2_cw.js","assets/createLucideIcon-M1JG7EBz.js","assets/index-DZ2Ey5_7.js","assets/chevron-right-CrdESc7p.js","assets/check-Cyy403AY.js","assets/accordion-DHuEXPng.js","assets/chevron-down-Mfh0mWaz.js","assets/button-C7iHbTqw.js","assets/index-Xj-Q384k.js","assets/index-CwaKb5FF.js","assets/dialog-CLWEkP9q.js","assets/input-BfSJiKKQ.js","assets/x-BpqL4Bns.js","assets/label-BwT1z_RF.js","assets/use-toast-DeMRPCeJ.js","assets/ImageLibraryDialog-B3TEaj-8.css","assets/index-DVZfbOhf.js","assets/trash-2-CSrjaLTp.js","assets/color-picker-Q1yTfexr.js","assets/color-picker-BOQRvWTA.css","assets/floating-ui.react-BugR93ss.js","assets/playground-overrides-K-LXsPQt.css","assets/PlaygroundEditorTheme-nA-I7k_h.js","assets/PlaygroundEditorTheme-BJ5jN8EW.css"])))=>i.map(i=>d[i]);
import{g as xs,n as Lt,d as F,_ as Vt}from"./index-ntR5v_s2.js";import{k as js,i as vs,r as i,j as t,L as bs}from"./react-core-BcR2_z_l.js";import{D as ys}from"./DashboardShell-BZQMplB5.js";import{D as ws,a as Ns,d as Pe,E as Ut}from"./DashboardPageHeader-B1rVFloq.js";import{B as _}from"./badge-CX6RuieY.js";import{B as x}from"./button-C7iHbTqw.js";import{C as ee,a as te}from"./card-VD61BBwz.js";import{D as Je,a as Ge,b as Xe,c as Ke,d as Ye}from"./dialog-CLWEkP9q.js";import{I as se}from"./input-BfSJiKKQ.js";import{L as z}from"./label-BwT1z_RF.js";import{S as De,a as Te,b as Ee,c as ke,d as S}from"./select-BOMyCGLP.js";import{t as D}from"./use-toast-DeMRPCeJ.js";import{c as Ft,g as Ss}from"./post-content-pZXP5BxF.js";import{P as As}from"./ProjectEmbedCard-C7Q0eiFB.js";import{a as Cs}from"./before-unload-DThTkbzC.js";import{b as Is}from"./date-D79tpn1j.js";import{b as Ps,t as Ds,s as Mt}from"./project-taxonomy-jSQkF-Xh.js";import{u as Ts}from"./use-page-meta-ewLab265.js";import{M as Es,a as ks,b as Ls}from"./mui-date-time-fields-DDmsgWL7.js";import{P as Us,a as Fs,b as Ze,c as Ms,d as Rs,e as Os}from"./pagination-DtDLAEll.js";import{P as et}from"./plus-93D78Kzx.js";import{X as $s}from"./x-BpqL4Bns.js";import{T as Rt}from"./trash-2-CSrjaLTp.js";import{c as Bs}from"./createLucideIcon-M1JG7EBz.js";import{C as Vs}from"./copy-DDizKV-Q.js";import{U as _s}from"./Footer-C9y59CM9.js";import{M as zs}from"./avatar-CVZSwVae.js";import"./mui-WkDK9qS1.js";import"./ThemedSvgLogo-CGFMwyp6.js";import"./url-safety-Py24cS-5.js";import"./index-Xj-Q384k.js";import"./index-CwaKb5FF.js";import"./separator-CDy1CE57.js";import"./skeleton-DbpZ9Rjt.js";import"./search-ranking-cq4don08.js";import"./use-dynamic-synopsis-clamp-DpjBDBPb.js";import"./access-control-C6qZ0ZhA.js";import"./index-CHWtszJ3.js";import"./index-DZ2Ey5_7.js";import"./chevron-down-Mfh0mWaz.js";import"./check-Cyy403AY.js";import"./lexical-CVusBMfS.js";import"./PlaygroundNodes-ChCl_XRL.js";import"./chevron-left-BKEfFFqA.js";import"./chevron-right-CrdESc7p.js";import"./shield-DlmGTLiS.js";import"./index-BMIt2_cw.js";import"./users-ok7q4J4c.js";import"./info-BTb-jBiG.js";import"./book-open-CG_mViAI.js";import"./ThemedSvgMaskIcon-B_IYD_H5.js";import"./globe-CRGpuS2E.js";import"./message-circle-qqsIJunn.js";const qs=Bs("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]),Fe=a=>{if(typeof a!="string")return!1;const n=a.trim();return!n||/^(data|blob):/i.test(n)?!1:/^https?:\/\//i.test(n)?!0:n.startsWith("/")},Le=a=>{if(!a)return null;if(Array.isArray(a)){for(const m of a){const p=Le(m);if(p)return p}return null}if(typeof a!="object")return null;const n=a,c=typeof n.type=="string"?n.type.toLowerCase():"",d=typeof n.src=="string"?n.src.trim():"";if(c==="image"&&Fe(d))return{coverImageUrl:d,coverAlt:typeof n.altText=="string"?n.altText.trim():""};if(Array.isArray(n.children)){const m=Le(n.children);if(m)return m}for(const[m,p]of Object.entries(n)){if(m==="children"||m==="src"||m==="altText")continue;const w=Le(p);if(w)return w}return null},Qs=a=>{const n=/<img\b[^>]*\bsrc\s*=\s*["']([^"']+)["'][^>]*>/gi;let c=n.exec(a);for(;c;){const d=String(c[1]||"").trim();if(Fe(d)){const p=String(c[0]||"").match(/\balt\s*=\s*["']([^"']*)["']/i);return{coverImageUrl:d,coverAlt:p?String(p[1]||"").trim():"",index:typeof c.index=="number"?c.index:Number.MAX_SAFE_INTEGER}}c=n.exec(a)}return null},Hs=a=>{const n=/!\[([^\]]*)\]\(([^)\s]+)(?:\s+"[^"]*")?\)/gi;let c=n.exec(a);for(;c;){const d=String(c[2]||"").trim();if(Fe(d))return{coverImageUrl:d,coverAlt:String(c[1]||"").trim(),index:typeof c.index=="number"?c.index:Number.MAX_SAFE_INTEGER};c=n.exec(a)}return null},Ws=(a,n)=>{const c=String(a||"");if(!c.trim())return null;if(n==="lexical")try{const p=JSON.parse(c);return Le(p?.root||p)}catch{return null}const d=Qs(c),m=Hs(c);return!d&&!m?null:d&&!m?d:!d&&m?m:d.index<=(m?.index??Number.MAX_SAFE_INTEGER)?d:m},Ot=a=>{const n=String(a?.title||"").trim(),c=typeof a?.coverImageUrl=="string"?a.coverImageUrl.trim():"";if(Fe(c))return{coverImageUrl:c,coverAlt:String(a?.coverAlt||"").trim()||n||"Capa",source:"manual"};const d=Ws(a?.content,a?.contentFormat);return d?.coverImageUrl?{coverImageUrl:d.coverImageUrl,coverAlt:d.coverAlt||n||"Capa",source:"content"}:{coverImageUrl:"",coverAlt:n||"Capa",source:"none"}},Js=a=>{const n=String(a||"").trim();if(!n)return"";let c=n;try{c=new URL(n,"https://local.invalid").pathname||n}catch{c=n.split("?")[0]?.split("#")[0]||n}const d=c.split("/").filter(Boolean).pop()||"";if(!d)return"";try{return decodeURIComponent(d)}catch{return d}},tt={title:"",slug:"",excerpt:"",contentLexical:"",author:"",coverImageUrl:"",coverAlt:"",status:"draft",publishAt:"",projectId:"",tags:[]},ae=a=>String(a).padStart(2,"0"),Ue=a=>`${a.getFullYear()}-${ae(a.getMonth()+1)}-${ae(a.getDate())}T${ae(a.getHours())}:${ae(a.getMinutes())}`,st=a=>{const[n,c]=a.split("T");if(!n)return{date:null,time:""};const[d,m,p]=n.split("-").map(w=>Number(w));return!d||!m||!p?{date:null,time:""}:{date:new Date(d,m-1,p),time:c||""}},rt=a=>a?Ue(new Date(a)):"",Gs=(a,n="12:00")=>{const[c,d]=a.split(":"),m=Number(c),p=Number(d),w=new Date;return w.setHours(Number.isFinite(m)?m:12,Number.isFinite(p)?p:0,0,0),w},re=a=>JSON.stringify({title:a.title,slug:a.slug,excerpt:a.excerpt,contentLexical:a.contentLexical,author:a.author,coverImageUrl:a.coverImageUrl,coverAlt:a.coverAlt,status:a.status,publishAt:a.publishAt,projectId:a.projectId,tags:a.tags}),$t=a=>{const n=Number(a);return!Number.isFinite(n)||n<1?1:Math.floor(n)},Bt=a=>a==="alpha"||a==="tags"||a==="projects"||a==="status"||a==="views"||a==="comments"||a==="recent"?a:"recent",at=a=>{const n=String(a||"").trim();if(!n)return"";if(n.startsWith("/uploads/"))return n.split(/[?#]/)[0]||n;try{const c=new URL(n);if(c.pathname.startsWith("/uploads/"))return c.pathname}catch{}return n},Xs=(a,n)=>at(a)===at(n),Ks=a=>{const n=String(a||"").trim();if(!n)return[];let c;try{c=JSON.parse(n)}catch{return[]}const d=[],m=new Set,p=I=>{if(!I)return;if(Array.isArray(I)){I.forEach(p);return}if(typeof I!="object")return;const L=I;if((typeof L.type=="string"?L.type.toLowerCase():"")==="image"){const M=typeof L.src=="string"?L.src:"",U=at(M);U.startsWith("/uploads/")&&!m.has(U)&&(m.add(U),d.push(U))}Array.isArray(L.children)&&L.children.forEach(p),Object.entries(L).forEach(([M,U])=>{M==="children"||M==="src"||M==="altText"||M==="type"||p(U)})},w=c?.root;return p(w??c),d},Ys=i.lazy(()=>Vt(()=>import("./LexicalEditor-DwJ9fzpw.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38]))),Zs=i.lazy(()=>Vt(()=>import("./ImageLibraryDialog-BbbI0q6f.js"),__vite__mapDeps([13,1,14,7,8,9,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30]))),er=()=>t.jsx("div",{className:"min-h-[460px] w-full rounded-2xl border border-border/60 bg-card/60 p-6 text-sm text-muted-foreground",children:"Carregando editor..."}),tr=a=>a==="published"?"Publicado":a==="scheduled"?"Agendado":"Rascunho",sa=()=>{Ts({title:"Posts",noIndex:!0});const a=js(),[n,c]=vs(),d=xs(),m=4320*60*1e3;Intl.DateTimeFormat().resolvedOptions().timeZone;const[p,w]=i.useState([]),[I,L]=i.useState([]),[nt,M]=i.useState([]),[U,_t]=i.useState([]),[q,zt]=i.useState(null),[ne,qt]=i.useState(!0),[N,ie]=i.useState(!1),[Qt,it]=i.useState(!1),[f,xe]=i.useState(null),[l,v]=i.useState(tt),[je,oe]=i.useState(!1),[ve,ot]=i.useState(!1),[j,lt]=i.useState(()=>Bt(n.get("sort"))),[R,O]=i.useState(()=>$t(n.get("page"))),[$,ct]=i.useState(()=>n.get("q")||""),[A,dt]=i.useState(()=>n.get("project")||"all"),[ut,Ht]=i.useState(""),[H,le]=i.useState(null),[be,ye]=i.useState(""),[mt,Me]=i.useState({}),W=i.useRef(null),[we,ce]=i.useState([]),[Ne,Re]=i.useState(null),[Wt,T]=i.useState(!1),[Jt,de]=i.useState("Sair da edição?"),[Gt,ue]=i.useState("Você tem alterações não salvas. Deseja continuar?"),J=i.useRef(null),G=i.useRef(null),pt=i.useRef(null),me=i.useRef(re(tt)),Oe=i.useRef(null),$e=i.useRef(!1),ht=i.useRef({sortMode:j,searchQuery:$,projectFilterId:A,currentPage:R}),gt=q&&nt.find(e=>e.id===q.id)||null,X=i.useMemo(()=>{if(!q)return!1;if(U.includes(q.id))return!0;const e=gt?.permissions||[];return e.includes("*")||e.includes("posts")},[q,gt,U]),k=i.useMemo(()=>re(l)!==me.current,[l]),C=i.useMemo(()=>Ot({coverImageUrl:l.coverImageUrl,coverAlt:l.coverAlt,content:l.contentLexical,contentFormat:"lexical",title:l.title}),[l.contentLexical,l.coverAlt,l.coverImageUrl,l.title]),Xt=i.useMemo(()=>Js(C.coverImageUrl),[C.coverImageUrl]),Se=i.useRef(!1),Be=i.useRef(!1);i.useEffect(()=>{je||v(e=>({...e,slug:Ft(e.title)}))},[l.title,je]),i.useEffect(()=>{N||it(!1)},[N]);const Ve=async()=>{const e=await F(d,"/api/posts",{auth:!0});if(!e.ok)throw new Error("posts_load_failed");const s=await e.json(),r=Array.isArray(s.posts)?s.posts:[];w(r)};i.useEffect(()=>{let e=!0;return(async()=>{try{const[r,o,u,g,P]=await Promise.all([F(d,"/api/posts",{auth:!0}),F(d,"/api/users",{auth:!0}),F(d,"/api/me",{auth:!0}),F(d,"/api/projects",{auth:!0}),F(d,"/api/public/tag-translations",{cache:"no-store"})]);if(r.ok){const h=await r.json();if(e){const Z=Array.isArray(h.posts)?h.posts:[];w(Z)}}if(o.ok){const h=await o.json();e&&(M(Array.isArray(h.users)?h.users:[]),_t(Array.isArray(h.ownerIds)?h.ownerIds:[]))}if(u.ok){const h=await u.json();e&&zt(h)}if(g.ok){const h=await g.json();e&&L(Array.isArray(h.projects)?h.projects:[])}if(P.ok){const h=await P.json();e&&Me(h.tags||{})}else e&&Me({})}catch{e&&(w([]),Me({}))}finally{e&&qt(!1)}})(),()=>{e=!1}},[d]),i.useEffect(()=>{if(!N||!k)return;const e=s=>{Cs(s)};return window.addEventListener("beforeunload",e),()=>window.removeEventListener("beforeunload",e)},[N,k]),i.useEffect(()=>{if(!N||!k)return;Be.current||(window.history.pushState(null,document.title,window.location.href),Be.current=!0);const e=()=>{if(Se.current){Se.current=!1;return}window.history.pushState(null,document.title,window.location.href),de("Sair da edição?"),ue("Você tem alterações não salvas. Deseja continuar?"),J.current=()=>{Se.current=!0,K(),a(-1)},G.current=()=>{Se.current=!1},T(!0)};return window.addEventListener("popstate",e),()=>{window.removeEventListener("popstate",e),Be.current=!1}},[N,k,a]),i.useEffect(()=>{if(!N||!k)return;const e=s=>{const o=s.target?.closest("a");if(!o)return;const u=o.getAttribute("href");!u||u.startsWith("#")||o.getAttribute("target")==="_blank"||(s.preventDefault(),de("Sair da edição?"),ue("Você tem alterações não salvas. Deseja continuar?"),J.current=()=>{const g=new URL(o.href,window.location.href);g.origin===window.location.origin?a(`${g.pathname}${g.search}${g.hash}`):window.location.href=g.href},G.current=()=>{T(!1)},T(!0))};return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[N,k,a]);const Kt=()=>{const e={...tt,author:q?.name||"",publishAt:Ue(new Date)};if(N&&k){de("Criar nova postagem?"),ue("Há alterações não salvas. Deseja descartar e criar uma nova postagem?"),J.current=()=>{xe(null),oe(!1),v(e),me.current=re(e),ie(!0)},G.current=null,T(!0);return}xe(null),oe(!1),v(e),me.current=re(e),ie(!0)},_e=i.useCallback(e=>{const s={title:e.title||"",slug:e.slug||"",excerpt:e.excerpt||"",contentLexical:e.content||"",author:e.author||"",coverImageUrl:e.coverImageUrl||"",coverAlt:e.coverAlt||"",status:e.status||"draft",publishAt:rt(e.publishedAt),projectId:e.projectId||"",tags:Array.isArray(e.tags)?e.tags:[]};xe(e),oe(!0),v(s),me.current=re(s),ie(!0)},[]);i.useEffect(()=>{const e=(n.get("edit")||"").trim();if(!e){Oe.current=null;return}if(Oe.current===e||ne)return;Oe.current=e;const s=new URLSearchParams(n);s.delete("edit");const r=X&&p.find(o=>o.id===e||o.slug===e)||null;r&&_e(r),s.toString()!==n.toString()&&c(s,{replace:!0})},[X,ne,_e,p,n,c]);const K=()=>{ie(!1),xe(null)},ft=()=>{if(!N||!k){K();return}de("Sair da edição?"),ue("Você tem alterações não salvas. Deseja continuar?"),J.current=()=>{K()},G.current=()=>{T(!1)},T(!0)},Yt=e=>{if(!(!e&&ve)){if(!e){ft();return}ie(!0)}},Zt=e=>{if(!N||!k){a(e);return}de("Sair da edição?"),ue("Você tem alterações não salvas. Deseja continuar?"),J.current=()=>{a(e)},G.current=()=>{T(!1)},T(!0)},B=i.useMemo(()=>new Map(I.map(e=>[e.id,e])),[I]),xt=i.useMemo(()=>Ks(l.contentLexical),[l.contentLexical]),Q=i.useMemo(()=>({uploadFolder:"posts",listFolders:["posts","shared"],listAll:!1,includeProjectImages:!0,projectImageProjectIds:[],projectImagesView:"by-project",currentSelectionUrls:xt}),[xt]),V=i.useMemo(()=>l.projectId?B.get(l.projectId)?.tags||[]:[],[l.projectId,B]),jt=i.useMemo(()=>Ps(mt),[mt]),pe=i.useCallback(e=>Ds(e,jt),[jt]);i.useEffect(()=>{const s=[...(l.tags||[]).filter(Boolean)];V.forEach(r=>{r&&!s.includes(r)&&s.push(r)}),ce(r=>{if(r.length===0)return s;const o=r.filter(u=>s.includes(u));return s.forEach(u=>{o.includes(u)||o.push(u)}),o})},[V,l.tags]);const vt=i.useCallback(e=>{if(!e.deletedAt)return!1;const s=new Date(e.deletedAt).getTime();return Number.isFinite(s)?Date.now()-s<=m:!1},[m]),es=e=>{if(!e.deletedAt)return"";const s=new Date(e.deletedAt).getTime();if(!Number.isFinite(s))return"";const r=m-(Date.now()-s),o=Math.max(0,Math.ceil(r/(1440*60*1e3)));return o<=1?"1 dia":`${o} dias`},Y=i.useMemo(()=>p.filter(e=>!e.deletedAt),[p]),ze=i.useMemo(()=>p.filter(e=>e.deletedAt&&vt(e)),[vt,p]),ts=i.useMemo(()=>{const e=new Set;return I.forEach(s=>{(s.tags||[]).forEach(r=>{r&&e.add(r)})}),Y.forEach(s=>{(s.tags||[]).forEach(r=>{r&&e.add(r)})}),Mt(Array.from(e),s=>pe(s))},[Y,pe,I]),bt=i.useMemo(()=>{if(we.length)return we;const e=[...V,...l.tags||[]];return Array.from(new Set(e.filter(Boolean)))},[V,l.tags,we]),yt=i.useMemo(()=>{const e=$.trim().toLowerCase();return e?Y.filter(s=>{if(j==="projects"&&A!=="all"&&s.projectId!==A)return!1;const r=s.projectId?B.get(s.projectId):null,o=r?.title||"",u=r?.tags?.join(" ")||"",g=Array.isArray(s.tags)?s.tags.join(" "):"";return[s.title,s.slug,s.excerpt,s.author,o,u,g].filter(Boolean).join(" ").toLowerCase().includes(e)}):j==="projects"&&A!=="all"?Y.filter(s=>s.projectId===A):Y},[Y,A,B,$,j]),he=i.useMemo(()=>{const e=[...yt];return e.sort((s,r)=>{if(j==="alpha")return s.title.localeCompare(r.title,"pt-BR");if(j==="tags"){const o=[...s.projectId?B.get(s.projectId)?.tags||[]:[],...Array.isArray(s.tags)?s.tags:[]],u=[...r.projectId?B.get(r.projectId)?.tags||[]:[],...Array.isArray(r.tags)?r.tags:[]];return o.join(",").localeCompare(u.join(","),"pt-BR")}return j==="projects"?new Date(r.publishedAt).getTime()-new Date(s.publishedAt).getTime():j==="status"?s.status.localeCompare(r.status,"pt-BR"):j==="views"?(r.views||0)-(s.views||0):j==="comments"?(r.commentsCount||0)-(s.commentsCount||0):new Date(r.publishedAt).getTime()-new Date(s.publishedAt).getTime()}),e},[yt,B,j]),Ae=10,Ce=Math.max(1,Math.ceil(he.length/Ae)),wt=(R-1)*Ae,ss=he.slice(wt,wt+Ae);i.useEffect(()=>{ne||O(e=>Math.min(e,Ce))},[ne,Ce]),i.useEffect(()=>{ht.current={sortMode:j,searchQuery:$,projectFilterId:A,currentPage:R}},[R,A,$,j]),i.useEffect(()=>{const e=Bt(n.get("sort")),s=n.get("q")||"",r=n.get("project")||"all",o=$t(n.get("page")),{sortMode:u,searchQuery:g,projectFilterId:P,currentPage:h}=ht.current;(u!==e||g!==s||P!==r||h!==o)&&($e.current=!0,lt(b=>b===e?b:e),ct(b=>b===s?b:s),dt(b=>b===r?b:r),O(b=>b===o?b:o))},[n]),i.useEffect(()=>{const e=new URLSearchParams(n);j==="recent"?e.delete("sort"):e.set("sort",j);const s=$.trim();s?e.set("q",s):e.delete("q"),A&&A!=="all"?e.set("project",A):e.delete("project"),R<=1?e.delete("page"):e.set("page",String(R));const r=n.toString(),o=e.toString();if($e.current){o===r&&($e.current=!1);return}o!==r&&c(e,{replace:!0})},[j,$,A,R,n,c]);const Nt=e=>{if(!e){v(u=>({...u,publishAt:""}));return}const{time:s}=st(l.publishAt||""),r=s||"12:00",o=`${Ue(e).slice(0,10)}T${r}`;v(u=>({...u,publishAt:o}))},St=e=>{if(!e||Number.isNaN(e.getTime()))return;const s=`${ae(e.getHours())}:${ae(e.getMinutes())}`,{date:r}=st(l.publishAt||""),u=Ue(r||new Date).slice(0,10);v(g=>({...g,publishAt:`${u}T${s}`}))},At=st(l.publishAt||""),rs=At.date,as=Gs(At.time||"12:00"),ns=()=>{const e=new Date;Nt(e),St(e)},qe=()=>{const e=be.trim();if(!e)return;const s=e.split(",").map(r=>r.trim()).filter(Boolean);if(s.length===0){ye("");return}v(r=>{const u=[...r.tags||[],...s.filter(g=>!V.includes(g))];return{...r,tags:Array.from(new Set(u))}}),ce(r=>{const o=[...r];return s.forEach(u=>{o.includes(u)||o.push(u)}),o}),ye(""),W.current&&(W.current.value="")},is=e=>{v(s=>({...s,tags:(s.tags||[]).filter(r=>r!==e)})),ce(s=>s.filter(r=>r!==e))},os=e=>{Re(e)},ls=e=>{if(!Ne||Ne===e){Re(null);return}ce(s=>{const r=[...s],o=r.indexOf(Ne),u=r.indexOf(e);return o===-1||u===-1?s:(r.splice(o,1),r.splice(u,0,Ne),r)}),Re(null)},cs=()=>{ot(!0)},ds=i.useCallback((e,s)=>{const r=String(e||"").trim();v(o=>{const g=!!!String(o.coverImageUrl||"").trim()&&C.source==="content"&&Xs(r,C.coverImageUrl);return{...o,coverImageUrl:g?"":r,coverAlt:o.coverAlt||s||o.title||"Capa"}})},[C.coverImageUrl,C.source]),us=async e=>{const s=`${window.location.origin}/postagem/${e}`;try{await navigator.clipboard.writeText(s),D({title:"Link copiado",description:s})}catch{D({title:"Não foi possível copiar o link"})}},ge=async e=>{const s=e||l.status,r=l.publishAt?new Date(l.publishAt).getTime():null,o=r!==null&&Number.isFinite(r)?new Date(r).toISOString():null,u=new Date().toISOString(),g=f?rt(f.publishedAt):"",P=!!f&&l.publishAt!==g;let h=f?.publishedAt||u;e==="published"?h=u:f&&!P?h=f.publishedAt||u:o&&(h=o);const Z=f&&!P?f.publishedAt:o;if(!(s!=="scheduled"||!!Z)){D({title:"Defina uma data de publicação",description:"Posts agendados precisam de uma data."});return}const y=Ss(l.contentLexical),fs=y.trim().slice(0,150),Ct=l.coverImageUrl.trim()||null,It=l.coverAlt.trim()||"",Pt=l.excerpt.trim()||y.trim().slice(0,160),Dt=(W.current?.value??be).split(",").map(E=>E.trim()).filter(Boolean),Qe=(()=>{const E=[],Ie=We=>{We&&!E.includes(We)&&E.push(We)};return we.forEach(Ie),(l.tags||[]).forEach(Ie),V.forEach(Ie),Dt.forEach(Ie),E})(),fe={title:l.title.trim(),slug:l.slug.trim(),coverImageUrl:Ct,coverAlt:It,excerpt:Pt,content:l.contentLexical,contentFormat:"lexical",author:l.author.trim(),publishedAt:h,status:s,seoTitle:l.title.trim(),seoDescription:fs,projectId:l.projectId||"",tags:Qe};if(!fe.title||!fe.slug){D({title:"Preencha os campos obrigatórios",description:"Título e slug são necessários para criar a postagem."});return}const Tt=await F(d,`/api/posts${f?`/${f.id}`:""}`,{method:f?"PUT":"POST",headers:{"Content-Type":"application/json"},auth:!0,body:JSON.stringify(fe)});if(!Tt.ok){D({title:"Não foi possível salvar",description:"Verifique as permissões ou tente novamente."});return}const Et=await Tt.json(),He=typeof Et?.post?.slug=="string"?Et.post.slug:"";if(!f){const E=Ft(fe.slug||fe.title);He&&He!==E&&D({title:"Link ajustado automaticamente",description:`Conflito detectado. O post foi salvo com /${He}.`})}await Ve();const kt={...l,status:s,publishAt:h?rt(h):"",excerpt:Pt,coverImageUrl:Ct||"",coverAlt:It,tags:Qe.filter(E=>!V.includes(E))};me.current=re(kt),v(E=>({...E,...kt})),ce(Qe),D({title:f?"Postagem atualizada":"Postagem criada",description:"As alterações já estão na dashboard."}),Dt.length&&(ye(""),W.current&&(W.current.value="")),(f||s==="published"||s==="scheduled")&&K()},ms=()=>{f&&le(f)},ps=async e=>{le(e)},hs=async()=>{if(!H)return;if(!(await F(d,`/api/posts/${H.id}`,{method:"DELETE",auth:!0})).ok){D({title:"Não foi possível excluir a postagem"});return}await Ve(),le(null),f&&H.id===f.id&&K(),D({title:"Postagem movida para a lixeira",description:"Você pode restaurar por 3 dias."})},gs=async e=>{const s=await F(d,`/api/posts/${e.id}/restore`,{method:"POST",auth:!0});if(!s.ok){if(s.status===410){D({title:"Janela de restauração expirou"}),await Ve();return}D({title:"Não foi possível restaurar a postagem"});return}const r=await s.json();w(o=>o.map(u=>u.id===e.id?r.post:u)),D({title:"Postagem restaurada"})};return t.jsxs(t.Fragment,{children:[t.jsx(ys,{currentUser:q,onUserCardClick:()=>a("/dashboard/usuarios?edit=me"),onMenuItemClick:(e,s)=>{!e.enabled||!N||!k||(s.preventDefault(),Zt(e.href))},children:t.jsxs(ws,{children:[t.jsx(Ns,{badge:"Postagens",title:"Gerenciar posts",description:"Visualize, edite e publique os posts mais recentes do site.",actions:X?t.jsxs(x,{className:"gap-2",onClick:Kt,children:[t.jsx(et,{className:"h-4 w-4"}),"Nova postagem"]}):void 0}),N&&X?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"pointer-events-auto fixed inset-0 z-40 bg-black/80 backdrop-blur-xs","aria-hidden":"true"}),t.jsx(Je,{open:N,onOpenChange:Yt,modal:!1,children:t.jsxs(Ge,{className:`max-w-6xl max-h-[92vh] overflow-y-auto no-scrollbar ${Qt?"editor-modal-scrolled":""}`,onScroll:e=>{const s=e.currentTarget.scrollTop>0;it(r=>r===s?r:s)},onPointerDownOutside:e=>{if(ve){e.preventDefault();return}e.target?.closest(".lexical-playground")&&e.preventDefault()},onInteractOutside:e=>{if(ve){e.preventDefault();return}e.target?.closest(".lexical-playground")&&e.preventDefault()},children:[t.jsxs(Xe,{children:[t.jsx(Ke,{children:f?"Editar postagem":"Nova postagem"}),t.jsx(Ye,{children:"Crie, edite e publique conteúdos sem sair da listagem."})]}),t.jsxs("div",{className:"mt-2 space-y-8",onFocusCapture:e=>{e.target?.closest(".lexical-playground")||pt.current?.blur()},children:[t.jsxs("div",{className:"grid gap-8 xl:grid-cols-[minmax(0,2fr)_minmax(0,1fr)]",children:[t.jsx(i.Suspense,{fallback:t.jsx(er,{}),children:t.jsx(Ys,{ref:pt,value:l.contentLexical,onChange:e=>v(s=>({...s,contentLexical:e})),placeholder:"Escreva o conteúdo do post...",className:"lexical-playground--stretch lexical-playground--modal min-w-0 w-full",imageLibraryOptions:Q})}),t.jsxs("aside",{className:"min-w-0 space-y-6",children:[t.jsx(ee,{className:"border-border/60 bg-card/80",children:t.jsxs(te,{className:"space-y-5 p-6",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(z,{htmlFor:"post-title",children:"Título"}),t.jsx(se,{id:"post-title",value:l.title,onChange:e=>v(s=>({...s,title:e.target.value}))})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(z,{htmlFor:"post-slug",children:"Link"}),t.jsx(x,{type:"button",variant:"ghost",size:"sm",onClick:()=>oe(e=>!e),children:je?"Automático":"Personalizar"})]}),t.jsx(se,{id:"post-slug",value:l.slug,onChange:e=>{oe(!0),v(s=>({...s,slug:e.target.value}))},disabled:!je})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(z,{htmlFor:"post-author",children:"Autor"}),t.jsx(se,{id:"post-author",value:l.author,onChange:e=>v(s=>({...s,author:e.target.value}))})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(z,{htmlFor:"post-status",children:"Status"}),t.jsxs(De,{value:l.status,onValueChange:e=>v(s=>({...s,status:e})),children:[t.jsx(Te,{id:"post-status",children:t.jsx(Ee,{placeholder:"Selecione"})}),t.jsxs(ke,{children:[t.jsx(S,{value:"draft",children:"Rascunho"}),t.jsx(S,{value:"scheduled",children:"Agendado"}),t.jsx(S,{value:"published",children:"Publicado"})]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(z,{htmlFor:"post-date",children:"Publicação"}),t.jsx(Es,{children:t.jsxs("div",{className:"grid gap-3 md:grid-cols-[1.2fr_0.8fr]",children:[t.jsx(ks,{id:"post-date",value:rs,onChange:Nt}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Ls,{id:"post-time",value:as,onChange:St,className:"flex-1"}),t.jsx(x,{type:"button",size:"sm",variant:"ghost",className:"h-8 px-2 text-xs",onClick:ns,children:"Agora"})]})]})})]})]})}),t.jsx(ee,{className:"border-border/60 bg-card/80",children:t.jsx(te,{className:"space-y-4 p-6",children:t.jsxs("div",{className:"space-y-2",children:[t.jsx(z,{children:"Capa"}),C.coverImageUrl?t.jsxs("div",{className:"space-y-2",children:[t.jsx("div",{className:"overflow-hidden rounded-lg border border-border bg-muted/20",children:t.jsx("img",{src:Lt(C.coverImageUrl),alt:C.coverAlt,className:"aspect-3/2 w-full object-cover"})}),t.jsxs("div",{className:"flex items-center justify-between gap-2 text-xs text-muted-foreground",children:[t.jsx("span",{className:"min-w-0 truncate",children:Xt||"Imagem"}),t.jsx(_,{variant:C.source==="manual"?"secondary":"outline",className:"shrink-0 text-[10px] uppercase",children:C.source==="manual"?"Manual":"Automática"})]})]}):t.jsx("p",{className:"text-xs text-muted-foreground",children:"Sem capa definida."}),t.jsx(x,{type:"button",variant:"outline",size:"sm",onClick:cs,children:"Biblioteca"})]})})}),t.jsx(ee,{className:"border-border/60 bg-card/80",children:t.jsx(te,{className:"space-y-4 p-6",children:t.jsxs("div",{className:"space-y-2",children:[t.jsx(z,{children:"Projeto associado"}),t.jsxs(De,{value:l.projectId||"none",onValueChange:e=>v(s=>({...s,projectId:e==="none"?"":e})),children:[t.jsx(Te,{children:t.jsx(Ee,{placeholder:"Selecione"})}),t.jsxs(ke,{children:[t.jsx(S,{value:"none",children:"Nenhum"}),I.map(e=>t.jsx(S,{value:e.id,children:e.title},e.id))]})]})]})})}),t.jsx(ee,{className:"border-border/60 bg-card/80",children:t.jsxs(te,{className:"space-y-4 p-6",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(z,{children:"Tags"}),t.jsxs("div",{className:"flex flex-wrap gap-2",children:[bt.map(e=>{const s=V.includes(e);return t.jsx("button",{type:"button",className:"group",draggable:!0,onDragStart:()=>os(e),onDragOver:r=>r.preventDefault(),onDrop:()=>ls(e),onClick:()=>{s||is(e)},children:t.jsxs(_,{variant:s?"secondary":"outline",className:"text-[10px] uppercase",children:[pe(e),s?null:t.jsx("span",{className:"ml-2 text-[10px] text-muted-foreground group-hover:text-foreground",children:"×"})]})},`tag-${e}`)}),bt.length===0?t.jsx("span",{className:"text-xs text-muted-foreground",children:"Sem tags ainda."}):null]})]}),t.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.jsx(se,{ref:W,value:be,onChange:e=>ye(e.target.value),placeholder:"Adicionar tag",list:"post-tag-options",onBlur:()=>{be.trim()&&qe()},onKeyDown:e=>{(e.key==="Enter"||e.key===",")&&(e.preventDefault(),qe())}}),t.jsx("datalist",{id:"post-tag-options",children:ts.map(e=>t.jsx("option",{value:e},e))}),t.jsx(x,{type:"button",variant:"secondary",onClick:qe,children:"Adicionar"})]})]})}),t.jsx("div",{className:"flex flex-wrap gap-3"})]})]}),l.projectId?t.jsx(As,{projectId:l.projectId}):null,t.jsxs("div",{className:"flex flex-wrap justify-end gap-3",children:[t.jsxs(x,{variant:"ghost",onClick:ft,className:"gap-2",children:[t.jsx($s,{className:"h-4 w-4"}),"Fechar"]}),f?t.jsxs(t.Fragment,{children:[t.jsxs(x,{variant:"outline",onClick:ms,className:"gap-2",children:[t.jsx(Rt,{className:"h-4 w-4"}),"Excluir"]}),t.jsxs(x,{onClick:()=>ge(),className:"gap-2",children:[t.jsx(qs,{className:"h-4 w-4"}),"Salvar"]}),l.status==="draft"?t.jsxs(x,{onClick:()=>ge("published"),className:"gap-2",children:[t.jsx(et,{className:"h-4 w-4"}),"Publicar agora"]}):null]}):t.jsxs(t.Fragment,{children:[t.jsx(x,{variant:"ghost",onClick:()=>ge("draft"),children:"Salvar rascunho"}),t.jsx(x,{variant:"secondary",onClick:()=>ge("scheduled"),children:"Agendar"}),t.jsxs(x,{onClick:()=>ge("published"),className:"gap-2",children:[t.jsx(et,{className:"h-4 w-4"}),"Publicar agora"]})]})]})]})]})})]}):null,t.jsxs("section",{className:"mt-10 space-y-6",children:[t.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 animate-slide-up opacity-0",children:[t.jsxs("div",{className:"flex flex-1 flex-wrap items-center gap-3",children:[t.jsx("div",{className:"w-full max-w-sm",children:t.jsx(se,{value:$,onChange:e=>{O(1),ct(e.target.value)},placeholder:"Buscar por título, slug, autor, tags..."})}),t.jsxs(De,{value:j,onValueChange:e=>{O(1),lt(e)},children:[t.jsx(Te,{className:"w-[200px]",children:t.jsx(Ee,{placeholder:"Ordenar por"})}),t.jsxs(ke,{children:[t.jsx(S,{value:"recent",children:"Mais recentes"}),t.jsx(S,{value:"alpha",children:"Ordem alfabética"}),t.jsx(S,{value:"tags",children:"Tags"}),t.jsx(S,{value:"projects",children:"Projetos"}),t.jsx(S,{value:"status",children:"Status"}),t.jsx(S,{value:"views",children:"Visualizações"}),t.jsx(S,{value:"comments",children:"Comentários"})]})]}),j==="projects"?t.jsxs(De,{value:A,onValueChange:e=>{O(1),dt(e)},children:[t.jsx(Te,{className:"w-[240px]",children:t.jsx(Ee,{placeholder:"Selecionar projeto"})}),t.jsxs(ke,{children:[t.jsx("div",{className:"p-2",children:t.jsx(se,{value:ut,onChange:e=>Ht(e.target.value),placeholder:"Buscar projeto..."})}),t.jsx(S,{value:"all",children:"Todos os projetos"}),I.filter(e=>e.title.toLowerCase().includes(ut.toLowerCase())).map(e=>t.jsx(S,{value:e.id,children:e.title},e.id))]})]}):null]}),t.jsxs(_,{variant:"secondary",className:"text-xs uppercase animate-slide-up opacity-0",children:[he.length," posts"]})]}),ne?t.jsx("div",{className:`${Pe.surfaceDefault} px-6 py-10 text-sm text-muted-foreground`,children:"Carregando postagens..."}):he.length===0?t.jsx("div",{className:`${Pe.surfaceMuted} border-dashed px-6 py-10 text-sm text-muted-foreground`,children:"Nenhuma postagem cadastrada ainda."}):t.jsx("div",{className:"grid gap-6",children:ss.map((e,s)=>{const r=e.publishedAt?Is(e.publishedAt):"Sem data",o=e.projectId?B.get(e.projectId):null,u=Array.from(new Set([...o?.tags||[],...Array.isArray(e.tags)?e.tags:[]])),g=Mt(u,y=>pe(y)),P=g.slice(0,3),h=Math.max(0,g.length-P.length),Z=tr(e.status),b=Ot({coverImageUrl:e.coverImageUrl,coverAlt:e.coverAlt,content:e.content,contentFormat:e.contentFormat||"lexical",title:e.title});return t.jsx(ee,{"data-testid":`post-card-${e.id}`,className:`${Pe.listCard} group cursor-pointer overflow-hidden transition hover:border-primary/40 animate-slide-up opacity-0`,style:{animationDelay:`${Math.min(s*35,210)}ms`},onClick:()=>{X&&_e(e)},children:t.jsx(te,{className:"p-0",children:t.jsxs("div",{className:"grid min-h-[360px] gap-0 lg:h-[280px] lg:min-h-0 lg:grid-cols-[220px_1fr]",children:[t.jsx("div",{className:"relative h-52 w-full lg:h-full",children:b.coverImageUrl?t.jsx("img",{src:Lt(b.coverImageUrl),alt:b.coverAlt||e.title,className:"h-full w-full object-cover",loading:"lazy",onError:y=>{y.currentTarget.src="/placeholder.svg"}}):t.jsx("div",{className:"flex h-full w-full items-center justify-center bg-muted/30 text-xs text-muted-foreground",children:"Sem capa"})}),t.jsxs("div",{className:"grid h-full min-h-0 grid-rows-[auto_auto_minmax(0,1fr)_auto] gap-2 p-4 lg:pb-5",children:[t.jsxs("div",{"data-slot":"top",className:"flex items-start justify-between gap-3",children:[t.jsxs("div",{className:"flex min-w-0 flex-wrap items-center gap-2",children:[t.jsx(_,{variant:"outline",className:"text-[10px] uppercase",children:Z}),o?t.jsx(_,{variant:"secondary",className:"max-w-60 truncate text-[10px] uppercase",children:o.title}):null]}),t.jsxs("div",{className:"flex shrink-0 items-center gap-1",children:[t.jsx(x,{variant:"ghost",size:"icon",title:"Visualizar",className:"h-8 w-8",onClick:y=>y.stopPropagation(),asChild:!0,children:t.jsx(bs,{to:`/postagem/${e.slug}`,children:t.jsx(Ut,{className:"h-3.5 w-3.5"})})}),t.jsx(x,{variant:"ghost",size:"icon",title:"Copiar link",className:"h-8 w-8",onClick:y=>{y.stopPropagation(),us(e.slug)},children:t.jsx(Vs,{className:"h-3.5 w-3.5"})}),X?t.jsx(x,{variant:"ghost",size:"icon",title:"Excluir",className:"h-8 w-8",onClick:y=>{y.stopPropagation(),ps(e)},children:t.jsx(Rt,{className:"h-3.5 w-3.5 text-destructive"})}):null]})]}),t.jsxs("div",{"data-slot":"headline",className:"min-h-11",children:[t.jsx("h3",{className:"line-clamp-2 text-lg font-semibold leading-tight text-foreground lg:line-clamp-1",children:e.title}),t.jsx("span",{className:"text-xs text-muted-foreground",children:r})]}),t.jsx("p",{"data-slot":"excerpt",className:"line-clamp-2 min-h-0 overflow-hidden text-sm text-muted-foreground lg:line-clamp-1",children:e.excerpt||"Sem prévia cadastrada."}),t.jsxs("div",{className:"flex min-h-0 flex-col gap-2",children:[t.jsx("div",{"data-slot":"tags",className:"min-h-6",children:P.length>0?t.jsxs("div",{className:"flex min-w-0 items-center gap-2 overflow-hidden",children:[P.map(y=>t.jsx(_,{variant:"secondary",className:"min-w-0 max-w-34 overflow-hidden text-[10px] uppercase",children:t.jsx("span",{className:"block min-w-0 truncate",children:pe(y)})},y)),h>0?t.jsxs(_,{variant:"secondary",className:"text-[10px] uppercase",children:["+",h]}):null]}):t.jsx("span",{className:"invisible text-[10px]",children:"placeholder"})}),t.jsxs("div",{"data-slot":"meta",className:"flex min-w-0 flex-wrap items-center gap-x-3 gap-y-1 text-xs text-muted-foreground lg:flex-nowrap lg:gap-y-0",children:[t.jsxs("span",{className:"inline-flex min-w-0 max-w-full items-center gap-2",children:[t.jsx(_s,{className:"h-4 w-4 shrink-0"}),t.jsx("span",{className:"truncate",children:e.author||"Autor não definido"})]}),t.jsxs("span",{className:"inline-flex shrink-0 items-center gap-2 whitespace-nowrap",children:[t.jsx(Ut,{className:"h-4 w-4"}),e.views," visualizações"]}),t.jsxs("span",{className:"inline-flex shrink-0 items-center gap-2 whitespace-nowrap",children:[t.jsx(zs,{className:"h-4 w-4"}),e.commentsCount," comentários"]}),t.jsxs("span",{className:"ml-auto hidden max-w-44 truncate text-right text-xs text-muted-foreground lg:block",children:["/",e.slug]})]})]})]})]})})},e.id)})}),he.length>Ae?t.jsx("div",{className:"mt-6 flex justify-center",children:t.jsx(Us,{children:t.jsxs(Fs,{children:[t.jsx(Ze,{children:t.jsx(Ms,{href:"#",onClick:e=>{e.preventDefault(),O(s=>Math.max(1,s-1))}})}),Array.from({length:Ce},(e,s)=>s+1).map(e=>t.jsx(Ze,{children:t.jsx(Rs,{href:"#",isActive:e===R,onClick:s=>{s.preventDefault(),O(e)},children:e})},e)),t.jsx(Ze,{children:t.jsx(Os,{href:"#",onClick:e=>{e.preventDefault(),O(s=>Math.min(Ce,s+1))}})})]})})}):null,ze.length>0?t.jsx(ee,{className:"mt-8 border-border/60 bg-card/60",children:t.jsxs(te,{className:"space-y-4 p-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold",children:"Lixeira"}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Restaure em até 3 dias após a exclusão."})]}),t.jsxs(_,{variant:"secondary",className:"text-xs uppercase",children:[ze.length," itens"]})]}),t.jsx("div",{className:"grid gap-3",children:ze.map((e,s)=>t.jsxs("div",{className:`${Pe.surfaceDefault} flex flex-wrap items-center justify-between gap-3 px-4 py-3 animate-slide-up opacity-0`,style:{animationDelay:`${Math.min(s*35,210)}ms`},children:[t.jsxs("div",{className:"min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-foreground",children:e.title}),t.jsxs("p",{className:"text-xs text-muted-foreground",children:["/",e.slug]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("span",{className:"text-xs text-muted-foreground",children:["Restam ",es(e)]}),t.jsx(x,{size:"sm",variant:"outline",onClick:()=>gs(e),children:"Restaurar"})]})]},`trash-${e.id}`))})]})}):null]})]})}),t.jsx(i.Suspense,{fallback:null,children:t.jsx(Zs,{open:ve,onOpenChange:ot,apiBase:d,description:"Escolha uma imagem ja enviada ou use capas/banners de projetos.",uploadFolder:Q.uploadFolder,listFolders:Q.listFolders,listAll:Q.listAll,includeProjectImages:Q.includeProjectImages,projectImageProjectIds:Q.projectImageProjectIds,projectImagesView:Q.projectImagesView,allowDeselect:!0,mode:"single",currentSelectionUrls:C.coverImageUrl?[C.coverImageUrl]:[],onSave:({urls:e})=>ds(e[0]||"")})}),t.jsx(Je,{open:Wt,onOpenChange:T,children:t.jsxs(Ge,{className:"max-w-md",children:[t.jsxs(Xe,{children:[t.jsx(Ke,{children:Jt}),t.jsx(Ye,{children:Gt})]}),t.jsxs("div",{className:"flex justify-end gap-3",children:[t.jsx(x,{variant:"ghost",onClick:()=>{G.current?.(),T(!1)},children:"Cancelar"}),t.jsx(x,{onClick:()=>{J.current?.(),T(!1)},children:"Confirmar"})]})]})}),t.jsx(Je,{open:!!H,onOpenChange:e=>{e||le(null)},children:t.jsxs(Ge,{className:"max-w-md",children:[t.jsxs(Xe,{children:[t.jsx(Ke,{children:"Excluir postagem?"}),t.jsx(Ye,{children:H?`Excluir "${H.title}"? Você pode restaurar por até 3 dias.`:""})]}),t.jsxs("div",{className:"flex justify-end gap-3",children:[t.jsx(x,{variant:"ghost",onClick:()=>le(null),children:"Cancelar"}),t.jsx(x,{variant:"destructive",onClick:hs,children:"Excluir"})]})]})})]})};export{sa as default};
